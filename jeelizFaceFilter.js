 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
window.JEEFACEFILTERAPIGEN=function(){function Hb(a){var c=null,d=null,e=null,k=0;this.A=function(m){this.cf(m.gb);e.ce({ec:m.ec,bc:m.bc})};this.ze=function(m){return c[m]};this.cf=function(m){var n=null;k=m.length;c=m.map(function(p,f){p=Object.assign({},p,{index:f,parent:this,nb:n,Je:f===k-1});return n=f=0===f?Ib.instance(p):Jb.instance(p)});d=c[0];e=c[k-1];c.forEach(function(p,f){0!==f&&p.Ue()})};this.V=function(m){var n=m;c.forEach(function(p){n=p.V(n,!1)});return n};this.ye=function(){return d.F()};
this.Nb=function(){return e.Ae()};this.Tc=function(){return e.Tc()};this.m=function(){c&&(c.forEach(function(m){m.m()}),e=d=c=null,k=0)};"undefined"!==typeof a&&this.A(a)}function cb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Kb(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var k="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var m=k.length;c=new Uint8Array(m);for(var n=0;n<m;++n)c[n]=k.charCodeAt(n);k=new Float32Array(e);m=new Float32Array(d);n=a+d+
1;for(var p=0;p<e;++p){for(var f=n*p,v=0===cb(c,f)?1:-1,B=f+1,r=1,g=0,z=B+a-1;z>=B;--z)g+=r*cb(c,z),r*=2;B=g;f=f+1+a;r=m.length;g=0;for(z=f;z<f+r;++z)m[g]=cb(c,z,!0),++g;for(r=f=0;r<d;++r)f+=m[r]*Math.pow(2,-r-1);k[p]=0===f&&0===B?0:v*(1+f)*Math.pow(2,1+B-Math.pow(2,a-1))}return k}function Xa(){return-1!==[fa.ready,fa.play,fa.pause].indexOf(ma)}function db(){if(ma===fa.play)return!1;ma=fa.play;Ma.stop();qb(0)}function rb(){if(ma!==fa.play)return!1;Ma.stop();ma=fa.pause;return!0}function Fa(a,c,d,
e,k){a=4*(3*c+a)+d;return e+(X.buffer[a]/255+X.buffer[a+12]/65025)*(k-e)}function eb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);sa.da();U.reset();Y.reset();A.R();A.Hc();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);U.Da();A.wa()}function sb(){sa.P();b.viewport(0,0,3,2*L.o);A.set("s52");X.ya.g(0);U.l(!1,!1);return ba.pb(0,0,3,2*L.o,X.buffer)}function qb(){ma!==fa.pause&&(A.Hc(),U.reset(),U.Da(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),A.wa(),Z.ee?sb().then(function(){tb();ub()}).catch(fb):
(tb(),sb().then(ub).catch(fb)))}function tb(){sa.da();if(!x.bb)if(x.ab)x.element.needsUpdate&&(x.N.uf(x.element.arrayBuffer),x.element.needsUpdate=!1);else{var a=x.element.currentTime,c=a-x.ob;0>c&&(x.ob=a);1E3*c<Z.wf||(x.ob+=c,x.N.refresh())}a=Ba.Uc();if(L.W.length>a)L.W.splice(0,L.W.length-a);else for(;L.W.length<a;)L.W.push(0);if(1!==L.o)if(pa.every(gb)){for(var d=0,e=c=0;e<pa.length;++e)pa[e].detected>d&&(d=pa[e].detected,c=0);for(d=0;d<a;++d)L.W[d]=c}else{c=L.jd;d=0;for(e=!1;d<a;++d){if(gb(pa[c]))if(e){do++c===
L.o&&(c=0);while(gb(pa[c]))}else e=!0;L.W[d]=c++;c>=L.o&&(c=0)}L.jd=c}for(a=0;a<Ba.Uc();++a)L.la=L.W[a],L.ac=(.5+L.la)/L.o,L.ed=L.W.lastIndexOf(L.la)===a,A.set("s54"),c=pa[L.la],A.H("u41",1+Na.ic*(Math.cos(c.ry)-1)),M.qa&&A.H("u40",c.rz),1!==L.o&&A.H("u39",L.ac),aa.ua.aa(),x.N.g(0),X.ya.g(1),U.l(!1,!1),aa.ua.g(0),Oa.V(aa.ua);Ba.pf()}function ub(){for(var a=0;a<L.o;++a)if(-1!==L.W.indexOf(a)){var c=a,d=Sa[c],e=[c],k=pa[c],m=hb[c],n=2*c;d.Sa=Fa(1,n,3,0,1);k.detected=ta.X(k.detected,d.Sa,Z.Nd);if(d.Sa<
Z.ld)M.qa&&(k.rz=0,k.ry=0);else{var p=X.Ka;d.x=Fa(0,n,1,-1,1);d.y=Fa(0,n,2,-1,1);d.$=Fa(0,n,3,0,1);d.fc=Fa(1,n,0,-p[0],p[0]);d.hc=Fa(1,n,1,-p[1],p[1]);d.La=Fa(1,n,2,-p[2],p[2]);for(p=0;p<X.Y;++p)d.Oc[p]=X.Ha[p](Fa(2,n,p,0,1));e.Hb=d.x-k.xRaw;e.Ib=d.y-k.yRaw;e.Gb=d.$-k.sRaw;e.Db=d.fc-k.rx;e.Eb=d.hc-k.ry;e.Fb=M.qa?d.La:d.La-k.rz;n=Ba.te();e=(1-Ya.hb(ua.translationFactorRange[0],ua.translationFactorRange[1],Math.sqrt(e.Hb*e.Hb+e.Ib*e.Ib+e.Gb*e.Gb)/n))*(1-Ya.hb(ua.rotationFactorRange[0],ua.rotationFactorRange[1],
Math.sqrt(e.Db*e.Db+e.Eb*e.Eb+e.Fb*e.Fb)/n))*Ya.hb(ua.qualityFactorRange[0],ua.qualityFactorRange[1],d.Sa);c=m[++ib[c]%m.length]=e;for(n=0;n<m.length;++n)c=Math.min(c,m[n]);c=Math.max(.5,c);e=Math.min(c,e);m=ta.X(ua.alphaRange[1],ua.alphaRange[0],Math.pow(e,Z.Pd));k.xRaw=ta.X(k.xRaw,d.x,m);k.yRaw=ta.X(k.yRaw,d.y,m);k.sRaw=ta.X(k.sRaw,d.$,m);k.rx=ta.X(k.rx,d.fc,m);k.ry=ta.X(k.ry,d.hc,m);k.rz=M.qa?k.rz+m*d.La:ta.X(k.rz,d.La,m);c=k.sRaw*Na.Cb*Math.sin(k.ry);e=Math.sin(k.rz)*c/Pa;k.x=k.xRaw+Math.cos(k.rz)*
c;k.y=k.yRaw+e;k.s=k.sRaw;m=Math.max(m,Z.Od);for(c=0;c<X.Y;++c)k.expressions[c]=ta.X(k.expressions[c],d.Oc[c],m);++d.kb}}sa.sf();sa.reset();Y.reset();b.enable(b.DEPTH_TEST);M.Ra&&(1===L.o?M.Ra(pa[0]):M.Ra(pa));b.disable(b.BLEND);fb()}function fb(){ma===fa.play&&Ma.$e(qb)}function vb(){aa.ua=Y.instance({isPot:!0,isFloat:!1,width:Oa.ye()});for(var a=Z.Ed,c=L.o,d=new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*L.o),k=0,m;k<L.o;++k)for(m=0;m<d.length;++m)e[k*d.length+m]=d[m];
X.ya=Lb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}function Mb(){function a(c){for(var d=[],e=0;e<L.o;++e)d.push(JSON.parse(JSON.stringify(c)));return d}X.buffer=new Uint8Array(8*Z.Ed*L.o);Sa=a({Sa:0,x:0,y:0,$:1,fc:0,hc:0,La:0,Oc:new Float32Array(X.Y),kb:0});pa=a({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(X.Y)});a({Hb:0,Ib:0,Gb:0,Db:0,Eb:0,Fb:0})}function jb(){A.T("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u37",value:1},{type:"2f",
name:"u38",value:aa.G},{type:"1f",name:"u39",value:.5},{type:"1f",name:"u40",value:0}]);A.T("s55",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u37",value:1},{type:"1f",name:"u45",value:Z.qf},{type:"1f",name:"u46",value:oa.threshold},{type:"3f",name:"u44",value:[X.O[0]*aa.G[0],X.O[1]*aa.G[1],X.O[2]]},{type:"1f",name:"u39",value:.5},{type:"1f",name:"u47",value:1},{type:"1f",name:"u40",value:0}]);var a=[{type:"1i",name:"u42",value:0}];A.T("s56",a);A.T("s57",a);A.T("s52",[{type:"1i",name:"u37",value:0},
{type:"1f",name:"u50",value:aa.G[0]},{type:"2f",name:"u49",value:[0,.5/L.o]}])}function kb(){aa.G[0]=1;aa.G[1]=aa.D/aa.M;wb.A({mb:oa.overlapFactors,pd:oa.nScaleLevels,D:aa.D,M:aa.M,yd:oa.scale0Factor,O:X.O,zd:oa.scanCenterFirst})}function Nb(a){if(M.za)xb("string"===typeof M.za?JSON.parse(M.za):M.za,a);else{var c=M.tc;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=Z.neuralNetworkPath);yb.get(c,function(d){d=JSON.parse(d);xb(d,a)})}}function xb(a,c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&
(X.Ka=d.rotationEulerAnglesFactors);d.translationScalingFactors&&(X.O=d.translationScalingFactors);"undefined"!==typeof d.nExpressions&&(X.Y=d.nExpressions);Na.ic=.4;Na.Cb=.7;"undefined"!==typeof d.fgScaleXFactor&&(Na.ic=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Na.Cb=d.fgDisplaceXFactor)}X.Y||(X.Y=Z.od);if(!X.Ha)for(X.Ha=[],d=0;d<X.Y;++d)X.Ha.push(Z.me);c(a)}function Ob(){if(Qa.A({zb:M.ea,width:aa.D,height:aa.M,debug:!1,qd:function(){Ha("GLCONTEXT_LOST")},antialias:M.antialias,
premultipliedAlpha:!0}))return!0;Ha("GL_INCOMPATIBLE");return!1}function gb(a){return a.detected<=Z.ld}function zb(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Pb(){return Sa.some(function(a,c){if(c===L.la)return!1;c=Sa[L.la];if(c.kb>a.kb||3>a.kb||zb(c.x,c.$,a.x,a.$)<Z.md*c.$)return!1;var d=aa.D/aa.M;return zb(c.y,c.$*d,a.y,a.$*d)>Z.md*c.$*d})}function Qb(){var a=L.la;X.ya.bf(1);1!==L.o&&(b.viewport(0,0,3,L.o),A.set("s0"),A.Dd("u1",1),U.l(!1,!1),A.Dd("u1",0));b.viewport(0,
a,1,1);A.set("s55");M.qa&&A.H("u40",pa[a].rz);1!==L.o&&A.H("u39",L.ac);if(1<L.o){var c=Pb()?0:1;A.H("u47",c)}A.gf("u43",wb.get());U.l(!1,!1);L.ed&&(b.viewport(1,a,1,1),A.set("s56"),U.l(!1,!1),b.viewport(2,a,1,1),A.set("s57"),U.l(!1,!1))}function Ab(){x.N&&x.N.remove();x.ab=x.element.isFakeVideo?!0:!1;if(x.ab){var a=Bb();a={isFlipY:!1,array:x.element.arrayBuffer,width:a.w,height:a.ta,isKeepArray:!0}}else a={L:x.element};x.mc=Y.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));x.N=x.mc}function Ia(){var a=
[{type:"mat2",name:"u36",value:x.v}];A.T("s53",[{type:"1i",name:"u1",value:0}].concat(a));A.T("s54",a)}function Ja(){x.K[0]=.5;x.K[1]=.5;var a=x.G[1]/x.G[0];Pa=Qa.U()/Qa.F();90===Math.abs(na.rotate)&&(a=1/a);a>Pa?x.K[1]*=Pa/a:x.K[0]*=a/Pa;A.T("s55",[{name:"u48",type:"1f",value:Pa}]);x.v[0]=0;x.v[1]=0;x.v[2]=0;x.v[3]=0;switch(na.rotate){case 0:x.v[0]=x.K[0];x.v[3]=x.K[1];break;case 180:x.v[0]=-x.K[0];x.v[3]=-x.K[1];break;case 90:x.v[1]=x.K[0];x.v[2]=-x.K[1];break;case -90:x.v[1]=-x.K[0],x.v[2]=x.K[1]}na.flipX&&
(x.v[0]*=-1,x.v[2]*=-1);x.bb||(x.v[1]*=-1,x.v[3]*=-1)}function Bb(){var a={w:x.element.videoWidth||x.element.width,ta:x.element.videoHeight||x.element.height};if(!a.w||!a.ta||4>a.w||4>a.ta)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.ta);return a}function lb(){var a=Bb(),c=x.G[0]!==a.w||x.G[1]!==a.ta;c&&(x.G[0]=a.w,x.G[1]=a.ta);return c}function Za(a,c){if(ma===fa.error)return!1;x.element=a;lb();c&&c();return!0}function Cb(a,c,d){a&&a();x.Fa={video:{facingMode:{exact:na.facingMode},
width:{min:na.minWidth,max:na.maxWidth,ideal:na.idealWidth},height:{min:na.minHeight,max:na.maxHeight,ideal:na.idealHeight}},audio:!1};na.deviceId&&(x.Fa.deviceId=na.deviceId);W.get(x.element?x.element:W.Ce(),function(e){c&&c(e);d(e)},function(){Ha("WEBCAM_UNAVAILABLE")},x.Fa)}function Ha(a){ma!==fa.error&&(ma=fa.error,M.Ea&&M.Ea(a))}var ta={qg:function(a){return Math.ceil(Math.log2(a))},Ig:function(a){return Math.log2(a)},Fg:function(a){return 0===Math.log2(a)%1},Gf:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=
d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Hf:function(a,c,d){return Math.min(Math.max(a,c),d)},Kf:function(a){return a*Math.PI/180},Ng:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},Og:function(a){return Math.round(1E6*a)/1E6},rg:function(a,c){return(100*a/c).toFixed(3)},X:function(a,c,d){return a*(1-d)+c*d},ie:function(a,c){return ta.$d(a-c)},$d:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Mf:function(a,c){return Math.abs(ta.ie(a,c))},xf:function(a,
c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},yb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},ng:function(a,c){yb.get(a,function(d){c(JSON.parse(d))})},Kg:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=
function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},cg:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},mb={Ab:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=mb.Ab(a[d],c);return a}},Ya={Zg:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},hb:function(a,c,d){return Math.min(Math.max((d-
a)/(c-a),0),1)},Xf:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},dh:function(){return 0},Jg:function(){return 1},Hg:function(a){return a},Uf:function(a){return a*a},Zf:function(a){return a*(2-a)},Rf:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Pf:function(a){return a*a*a},Yf:function(a){return--a*a*a+1},Qf:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Vf:function(a){return a*a*a*a},$f:function(a){return 1- --a*a*a*a},Sf:function(a){return.5>a?8*a*a*a*a:1-8*--a*
a*a*a},Wf:function(a){return a*a*a*a*a},ag:function(a){return 1+--a*a*a*a*a},Tf:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Rb={pe:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";
default:return!1}}},A=function(){function a(u,t,D){t=u.createShader(t);u.shaderSource(t,D);u.compileShader(t);return u.getShaderParameter(t,u.COMPILE_STATUS)?t:!1}function c(u,t,D){t=a(u,u.VERTEX_SHADER,t);D=a(u,u.FRAGMENT_SHADER,D);u===b&&n.push(t,D);var J=u.createProgram();u.attachShader(J,t);u.attachShader(J,D);u.linkProgram(J);return J}function d(u,t){t.C=t.C?!0:!1;if(!t.C){void 0===t.pa&&(t.pa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");
void 0===t.Pa&&(t.Pa=["a0"]);void 0===t.Ba&&(t.Ba=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=r;t.id=v++;void 0!==t.Ad&&(t.Ad.forEach(function(J,O){t.h=t.h.replace(J,t.qb[O])}),t.Ad.splice(0));t.sc=0;t.Ba.forEach(function(J){t.sc+=4*J});t.na=c(u,t.pa,"precision "+t.precision+" float;\n"+t.h);t.B={};t.i.forEach(function(J){t.B[J]=u.getUniformLocation(t.na,J)});t.attributes={};t.Ca=[];t.Pa.forEach(function(J){var O=u.getAttribLocation(t.na,J);t.attributes[J]=O;t.Ca.push(O)});if(t.j){u.useProgram(t.na);
f=t;p=t.id;for(var D in t.j)u.uniform1i(t.B[D],t.j[D])}t.ma=!0}}function e(u){va.ff(I);p!==u.id&&(I.R(),p=u.id,f=u,b.useProgram(u.na),u.Ca.forEach(function(t){0!==t&&b.enableVertexAttribArray(t)}))}function k(u,t,D){d(u,t,D);u.useProgram(t.na);u.enableVertexAttribArray(0);p=-1;return f=t}function m(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],p=-1,f=null,v=0,B=!1,r="highp",g=["u1"],z=["u0"],y={u1:0},l={u0:0},q={u1:0,u2:1},
E={u3:0},N={s0:m(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:g,j:y,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:q},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:g,j:y},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:q},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:g,j:y},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:g,j:y},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:l},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:l},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:g,j:y},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:y},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:y},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:z,j:l,C:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:z,j:l},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:z,j:l},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:z,j:l},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},C:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:z,j:l},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:z,j:l,C:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},C:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:y},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},C:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},C:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},C:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:g,j:y,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:y,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:y,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:q,C:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:q,C:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:E},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:E,C:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:y,precision:"lowp",C:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:y,precision:"lowp",
C:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},C:!0}},K={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],qb:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),qb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},P=null,G=null,I={fb:function(){return B},A:function(){if(!B){P=mb.Ab(N,2);G=mb.Ab(K,2);r="highp";for(var u in P)d(b,P[u],u);A.set("s0");b.enableVertexAttribArray(0);B=!0}},wc:function(u){u.forEach(function(t){I.vc(t)})},vc:function(u){P[u.id]=u;d(b,u,u.id)},Xc:function(u,t,D){t||(t=u);P[t]=Object.create(G[u]);P[t].Ie=!0;G[u].qb&&G[u].qb.forEach(function(J,O){P[t].h=P[t].h.replace(new RegExp(J,"g"),D[O])});d(b,
P[t],t)},set:function(u){u=P[u];u.C&&(u.C=!1,d(b,u,u.id));e(u)},Ma:function(u){return k(u,m(),"s40")},jc:function(u){return k(u,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},le:function(u){return"undefined"===typeof P[u]?!1:P[u].ma},R:function(){-1!==p&&(p=-1,f.Ca.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},lc:function(){var u=0;f.Ca.forEach(function(t,D){D=f.Ba[D];b.vertexAttribPointer(t,D,b.FLOAT,!1,f.sc,u);u+=4*D})},Hc:function(){b.enableVertexAttribArray(0)},
wa:function(){I.rb(b)},rb:function(u){u.vertexAttribPointer(f.Ca[0],2,u.FLOAT,!1,8,0)},Dd:function(u,t){b.uniform1i(f.B[u],t)},H:function(u,t){b.uniform1f(f.B[u],t)},oa:function(u,t,D){b.uniform2f(f.B[u],t,D)},Tg:function(u,t){b.uniform2fv(f.B[u],t)},gf:function(u,t){b.uniform3fv(f.B[u],t)},Ug:function(u,t,D,J){b.uniform3f(f.B[u],t,D,J)},Vg:function(u,t,D,J,O){b.uniform4f(f.B[u],t,D,J,O)},kc:function(u,t){b.uniform4fv(f.B[u],t)},Wg:function(u,t){b.uniformMatrix2fv(f.B[u],!1,t)},Xg:function(u,t){b.uniformMatrix3fv(f.B[u],
!1,t)},Yg:function(u,t){b.uniformMatrix4fv(f.B[u],!1,t)},T:function(u,t){I.set(u);t.forEach(function(D){switch(D.type){case "4f":b.uniform4fv(f.B[D.name],D.value);break;case "3f":b.uniform3fv(f.B[D.name],D.value);break;case "2f":b.uniform2fv(f.B[D.name],D.value);break;case "1f":b.uniform1f(f.B[D.name],D.value);break;case "1i":b.uniform1i(f.B[D.name],D.value);break;case "mat2":b.uniformMatrix2fv(f.B[D.name],!1,D.value);break;case "mat3":b.uniformMatrix3fv(f.B[D.name],!1,D.value);break;case "mat4":b.uniformMatrix4fv(f.B[D.name],
!1,D.value)}})},pg:function(){return"lowp"},m:function(){b.disableVertexAttribArray(0);I.R();for(var u in P){var t=P[u];t.ma&&(t.ma=!1,b.deleteProgram(t.na));t.Ie&&delete P[u]}n.forEach(function(D){b.deleteShader(D)});n.splice(0);v=0;B=!1;f=null;p=-1}};return I}(),b=null,Qa=function(){function a(r){console.log("ERROR in ContextFF: ",r);return!1}function c(r){function g(){Ca.m();ba.reset();y.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var z=document.createElement("canvas");z.setAttribute("width",5);z.setAttribute("height",5);var y=null;try{y=z.getContext("webgl2",r)}catch(l){return!1}if(!y)return!1;d(y);ba.Ic(y);r=ba.Bb(y);if(!r.fa&&!r.ga)return g(),!1;r=Ca.zc(y,r);g();return r?!0:!1}function d(r){r.clearColor(0,0,0,0);r.disable(r.DEPTH_TEST);r.disable(r.BLEND);r.disable(r.DITHER);r.disable(r.STENCIL_TEST);r.disable(r.CULL_FACE);r.GENERATE_MIPMAP_HINT&&r.hint(r.GENERATE_MIPMAP_HINT,r.FASTEST);r.disable(r.SAMPLE_ALPHA_TO_COVERAGE);
r.disable(r.SAMPLE_COVERAGE);r.depthFunc(r.LEQUAL);r.clearDepth(1)}var e=null,k=null,m=null,n=null,p=!0,f=null,v=null,B={F:function(){return e.width},U:function(){return e.height},gg:function(){return e},eg:function(){return b},ha:function(){return p},flush:function(){b.flush()},se:function(){f||(f=new Uint8Array(e.width*e.height*4));b.readPixels(0,0,e.width,e.height,b.RGBA,b.UNSIGNED_BYTE,f);return f},ig:function(){return e.toDataURL("image/jpeg")},jg:function(){sa.P();k||(k=document.createElement("canvas"),
m=k.getContext("2d"));k.width=e.width;k.height=e.height;for(var r=B.se(),g=m.createImageData(k.width,k.height),z=k.width,y=k.height,l=g.data,q=0;q<y;++q)for(var E=y-q-1,N=0;N<z;++N){var K=4*(q*z+N),P=4*(E*z+N);l[K]=r[P];l[K+1]=r[P+1];l[K+2]=r[P+2];l[K+3]=r[P+3]}m.putImageData(g,0,0);return k.toDataURL("image/png")},hg:function(r){!k&&r&&(k=document.createElement("canvas"),m=k.getContext("2d"));var g=r?k:document.createElement("canvas");g.width=e.width;g.height=e.height;(r?m:g.getContext("2d")).drawImage(e,
0,0);return g},A:function(r){r.de&&!r.zb?e=document.getElementById(r.de):r.zb&&(e=r.zb);e||(e=document.createElement("canvas"));e.width=r&&void 0!==r.width?r.width:512;e.height=r&&void 0!==r.height?r.height:512;"undefined"===typeof r&&(r={});void 0===r.premultipliedAlpha&&(r.premultipliedAlpha=!1);void 0===r.ad&&(r.ad=!0);void 0===r.antialias&&(r.antialias=!1);if(b)p=b instanceof WebGL2RenderingContext;else{p=!0;var g={antialias:r.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:r.premultipliedAlpha,
stencil:!1,depth:r.ad};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(g.antialias=!1);var z=c(g);!z&&g.antialias&&(g.antialias=!1,z=c(g));z&&(b=e.getContext("webgl2",g));b?p=!0:((b=e.getContext("webgl",g))||(b=e.getContext("experimental-webgl",g)),p=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(n=b.getExtension("WEBGL_lose_context"))&&r.qd&&(v=r.qd,e.addEventListener("webglcontextlost",v,!1));if(!ba.A())return a("Not enough GL capabilities");d(b);A.A();
U.A();return Ca.zc(b,ba.re())?!0:a("Cannot filter float textures")},m:function(){b&&(ba.m(),Ca.m());n&&v&&(e.removeEventListener("webglcontextlost",v,!1),n=v=null);b=f=m=k=e=null}};return B}(),va=function(){function a(){null===c&&("undefined"!==typeof A?c=A:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{ff:function(d){c!==d&&(c&&c.R(),c=d)},fb:function(){return c.fb()},wa:function(){return c.wa()},rb:function(d){return c.rb(d)},lc:function(){return c.lc()},R:function(){return c.R()},
set:function(d){return c.set(d)},Ma:function(d){a();return c.Ma(d)},jc:function(d){a();return c.jc(d)},m:function(){return c.m()}}}(),Aa=function(){function a(h){b.bindTexture(b.TEXTURE_2D,h)}function c(h){t[0]=h;h=D[0];var H=h>>16&32768,F=h>>12&2047,T=h>>23&255;return 103>T?H:142<T?H|31744|((255==T?0:1)&&h&8388607):113>T?(F|=2048,H|(F>>114-T)+(F>>113-T&1)):H=(H|T-112<<10|F>>1)+(F&1)}function d(h){var H=new Uint16Array(h.length);h.forEach(function(F,T){H[T]=c(F)});return H}function e(){if(null!==
J.Qb)return J.Qb;var h=m(d([.5,.5,.5,.5]));return null===h?!0:J.Qb=h}function k(){if(null!==J.Rb)return J.Rb;var h=m(new Uint8Array([127,127,127,127]));return null===h?!0:J.Rb=h}function m(h){if(!va.fb()||!l)return null;var H=null,F=Math.sqrt(h.length/4);try{var T=b.getError();if("FUCKING_BIG_ERROR"===T)return!1;H=O.instance({isFloat:!1,S:!0,array:h,width:F});T=b.getError();if(T!==b.NO_ERROR)return!1}catch(wa){return!1}ka.P();b.viewport(0,0,F,F);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);va.set("s0");
H.xc(0);la.l(!0,!0);h=4*F*F;T=new Uint8Array(h);b.readPixels(0,0,F,F,b.RGBA,b.UNSIGNED_BYTE,T);F=!0;for(var ea=0;ea<h;++ea)F=F&&3>Math.abs(T[ea]-127);H.remove();ka.da();return F}var n=0,p=null,f=0,v=null,B=null,r=null,g=null,z=null,y=null,l=!1,q=[],E={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,L:null,Pb:null,He:!1,S:!1,ka:null,jb:4,Xb:0},N=!1,K=null,P=null,G=[[1,
0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],I=!1,u=!1,t=new Float32Array(1),D=new Int32Array(t.buffer),J={Qb:null,Rb:null},O={A:function(){l||(z=[b.RGBA,null,b.RGBA,b.RGBA],y=[b.RGBA,null,b.RGBA,b.RGBA],p=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],I="undefined"!==typeof JEContext,u="undefined"!==typeof ba,I&&JEContext.Gg()&&p.push(b.TEXTURE8,b.TEXTURE9),v=[-1,-1,-1,-1,-1,-1,-1,-1],g=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],l=!0)},Ee:function(){if(!B){for(var h=new Float32Array(16384),
H=0;16384>H;++H)h[H]=2*Math.random()-1;B={random:O.instance({isFloat:!0,isPot:!0,array:h,width:64}),Jd:O.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}O.vf()},xg:function(){return B.Jd},vf:function(){g[1]=ba.Lb(b)},df:function(){y=z=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},xd:function(h){A.set("s1");ka.P();var H=h.F(),F=h.U();b.viewport(0,0,H,F);h.g(0);la.l(!1,!1)},Lg:function(h,H){O.xd(h);b.readPixels(0,0,h.F(),h.U(),b.RGBA,b.UNSIGNED_BYTE,H)},Mg:function(h,H){O.xd(h);return ba.pb(0,
0,h.F(),h.U(),H)},Qc:function(h,H,F,T,ea,wa,w){h.activeTexture(h.TEXTURE0);var qa=h.createTexture();h.bindTexture(h.TEXTURE_2D,qa);ea=ea instanceof Float32Array?ea:new Float32Array(ea);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,wa);h.texImage2D(h.TEXTURE_2D,0,
h.RGBA,F,T,0,h.RGBA,h.FLOAT,ea);h.bindTexture(h.TEXTURE_2D,null);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);w&&(ka.da(),A.Ma(h));h.viewport(0,0,F,T);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,H,0);h.bindTexture(h.TEXTURE_2D,qa);w?la.l(!0,!0):U.Wa(h);h.deleteTexture(qa);l&&(v[0]=-1,r=null,n=0)},vb:function(h){h!==n&&(b.activeTexture(p[h]),n=h)},instance:function(h){function H(C){var Q=b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C);Q=
b.getError();Q!==b.NO_ERROR&&da!==b.RGBA&&(da=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C));return!0}function F(){if(!Db){a(ra);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ya);w.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,w.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,w.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&
"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.kg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.zf);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,w.isLinear?b.LINEAR:b.NEAREST);w.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ka?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,w.isMipmap&&!Ka?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);da=z[w.jb-1];ha=y[w.jb-1];ia=g[nb];if(ba.ha()){var C=ba.ue();da===b.RGBA&&ia===b.FLOAT?w.isMipmap||
w.isLinear?ha=Ca.we(b):ba.Ac()?C&&(ha=C):ha=b.RGBA16F||b.RGBA:da===b.RGB&&ia===b.FLOAT&&C&&(ha=C,da=b.RGBA)}if(w.S&&!w.isFloat||w.isFloat&&w.isMipmap&&Ca.Le())ha=ba.ve(),ia=ba.Lb(b);w.Xb&&($a=w.Xb);w.isSrgb&&4===w.jb&&(da=JEContext.vg());if(w.L)H(w.L);else if(w.url)H(Ga);else if(za){C=za;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,C),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,
0,b.RGBA,R,S,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(ec){b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null)}w.isKeepArray||(za=null)}else C=b.getError(),"FUCKING_BIG_ERROR"!==C&&(b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null),C=b.getError(),C!==b.NO_ERROR&&(da=b.RGBA,w.S&&ia!==b.FLOAT&&(ia=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,null))));if(w.isMipmap)if(!Ka&&ca)ca.Kb(),ab=!0;else if(Ka){C=Math.log2(Math.min(R,S));Ra=Array(1+C);Ra[0]=ra;for(var Q=1;Q<=C;++Q){var ja=Math.pow(2,Q),V=R/ja;
ja=S/ja;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ha,V,ja,0,da,ia,null);a(null);Ra[Q]=La}ab=!0}a(null);v[n]=-1;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ta=!0;w.ka&&ca&&(w.ka(ca),w.ka=null)}}function T(){for(var C=R*S,Q=2*C,ja=3*C,V=0;V<C;++V)xa[0][V]=Ua[V],xa[1][V]=Ua[V+C],xa[2][V]=Ua[V+Q],xa[3][V]=Ua[V+ja]}function ea(){var C=R*S*4;Da=[new Uint8Array(C),new Uint8Array(C),
new Uint8Array(C),new Uint8Array(C)];xa=[new Float32Array(Da[0].buffer),new Float32Array(Da[1].buffer),new Float32Array(Da[2].buffer),new Float32Array(Da[3].buffer)];bb=new Uint8Array(4*C);Ua=new Float32Array(bb.buffer);Va=!0}function wa(){Ea.wb=new Uint8Array(R*S*4);Ea.Rc=new Float32Array(Ea.buffer);Ea.Ub=!0}var w=Object.assign({},E,h),qa=f++;null===w.isFlipY&&(w.isFlipY=w.url||w.array?!0:!1);w.data&&(w.array="string"===typeof w.data?Kb(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),
w.isFlipY=!1);var nb=0,Sb=w.L?!0:!1,Wa=null,ob=null,Eb=!1,pb=null;w.S=w.S||w.isFloat;w.S&&(nb=1);!w.He&&w.isFloat&&u&&!ba.Ac()&&(w.isFloat=!1);w.isFloat&&(nb=2);w.isAnisotropicFiltering&&I&&!JEContext.Ag()&&(w.isAnisotropicFiltering=!1);var ra=w.Pb||b.createTexture(),Ga=null,za=!1,R=0,S=0,Ta=!1,Db=!1,Va=!1,xa=null,Da=null,bb=null,Ua=null,ha=null,da=null,ia=null,ya=w.isFlipY,Tb=(h=w.S&&w.isMipmap)&&Ca.Vd(),Ka=h&&Tb?!0:!1,Ra=null,$a=-1,ab=!1,Ea={Ub:!1,wb:null,Rc:null};w.width&&(R=w.width,S=w.height?
w.height:R);var ca={get:function(){return ra},F:function(){return R},U:function(){return S},yg:function(){return w.url},Bg:function(){return w.isFloat},Dg:function(){return w.S},Eg:function(){return w.isLinear},Kb:function(){b.generateMipmap(b.TEXTURE_2D)},Td:function(C,Q){Ka?(C||(C=ca.Vc()),O.vb(Q),a(Ra[C]),v[Q]=-1):ca.g(Q)},Vc:function(){-1===$a&&($a=Math.log(R)/Math.log(2));return $a},oe:function(C){if(Ka){C||(C=ca.Vc());A.set("s11");O.vb(0);for(var Q=R,ja=S,V=1;V<=C;++V)Q/=2,ja/=2,A.oa("u7",.25/
Q,.25/ja),b.viewport(0,0,Q,ja),a(Ra[V-1]),b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[V],0),la.l(!1,1===V);v[0]=-1}else ca.Kb()},g:function(C){if(!Ta)return!1;O.vb(C);if(v[C]===qa)return!1;a(ra);v[C]=qa;return!0},xc:function(C){b.activeTexture(p[C]);n=C;a(ra);v[C]=qa},u:function(){r=ca;b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},aa:function(){r=ca;b.viewport(0,0,R,S);b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},rc:O.rc,resize:function(C,
Q){R=C;S=Q;F()},clone:function(C){C=O.instance({width:R,height:S,S:w.S,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:C?!ya:ya,isPot:w.isPot});va.set("s0");ka.da();C.u();b.viewport(0,0,R,S);ca.g(0);la.l(!0,!0);return C},hf:function(){b.viewport(0,0,R,S)},remove:function(){b.deleteTexture(ra);Db=!0;q.splice(q.indexOf(ca),1);ca=null},refresh:function(){ca.xc(0);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Sb?b.texImage2D(b.TEXTURE_2D,0,ha,da,b.UNSIGNED_BYTE,w.L):b.texImage2D(b.TEXTURE_2D,
0,ha,R,S,0,da,ia,za);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},wd:function(){Va||ea();b.readPixels(0,0,R,4*S,b.RGBA,b.UNSIGNED_BYTE,bb);T();return xa},Xe:function(){Va||ea();return ba.pb(0,0,R,4*S,bb).then(function(){T();return xa})},Ze:function(){Ea.Ub||wa();b.readPixels(0,0,R,S,b.RGBA,b.UNSIGNED_BYTE,Ea.wb);return Ea.Rc},Ye:function(){Ea.Ub||wa();return ba.pb(0,0,R,S,Ea.wb)},Fc:function(C){ka.P();A.set("s12");ca.g(0);if(C)b.viewport(0,0,R,S),A.kc("u8",.25,.25,.25,.25),la.l(!1,!0);else for(C=
0;4>C;++C)b.viewport(0,S*C,R,S),A.kc("u8",G[C]),la.l(!1,0===C)},uf:function(C){var Q=ia===g[0]&&!k();a(ra);ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Q?(Eb||(Wa=document.createElement("canvas"),Wa.width=R,Wa.height=S,ob=Wa.getContext("2d"),pb=ob.createImageData(R,S),Eb=!0),pb.data.set(C),ob.putImageData(pb,0,0),b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,Wa)):b.texImage2D(b.TEXTURE_2D,0,ha,R,S,0,da,ia,C);v[n]=qa;ya&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},bh:function(C,Q){a(ra);Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!0);b.texImage2D(b.TEXTURE_2D,0,ha,da,ia,C);v[n]=qa;Q&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Rg:function(C,Q){var ja=R*S,V=4*ja;C=w.S?C?"RGBE":"JSON":"RGBA";Q&&(C=Q);Q=ba.ha()&&!1;var La=null;switch(C){case "RGBE":La="s42";break;case "JSON":La=Q?"s0":"s12";break;case "RGBA":case "RGBAARRAY":La="s6"}Va||("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C?(Da=new Uint8Array(V),Va=!0):"JSON"!==C||Q||ea());ka.P();A.set(La);ca.g(0);V=null;if("RGBA"===C||"RGBE"===C||"RGBAARRAY"===C){b.viewport(0,0,R,S);la.l(!0,
!0);b.readPixels(0,0,R,S,b.RGBA,b.UNSIGNED_BYTE,Da);if("RGBAARRAY"===C)return{data:Da};N||(K=document.createElement("canvas"),P=K.getContext("2d"),N=!0);K.width=R;K.height=S;ja=P.createImageData(R,S);ja.data.set(Da);P.putImageData(ja,0,0);V=K.toDataURL("image/png")}else if("JSON"===C)if(Q)V=new Float32Array(ja),b.viewport(0,0,R,S),la.l(!0,!0),b.readPixels(0,0,R,S,b.RGBA,b.FLOAT,V);else{for(V=0;4>V;++V)b.viewport(0,S*V,R,S),A.kc("u8",G[V]),la.l(!V,!V);ca.wd();V=Array(ja);for(Q=0;Q<ja;++Q)V[4*Q]=xa[0][Q],
V[4*Q+1]=xa[1][Q],V[4*Q+2]=xa[2][Q],V[4*Q+3]=xa[3][Q]}return{format:C,data:V,width:R,height:S,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===C?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!Ka&&Ta&&!ab&&(ca.Kb(),ab=!0);if(w.url)a(ra),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ga=new Image,Ga.Lf="Anonymous",Ga.crossOrigin="Anonymous",Ga.src=w.url,Ga.onload=function(){R=Ga.width;S=Ga.height;F()};else if(w.L){var Fb=function(){R=void 0!==w.L.videoWidth?w.L.videoWidth:w.L.width;S=void 0!==w.L.videoHeight?
w.L.videoHeight:w.L.height;R?F():setTimeout(Fb,1)};Fb()}else w.array?(w.S&&!w.isFloat?w.array instanceof Uint16Array?(za=w.array,F()):e()?(za=d(w.array),F()):(F(),O.Qc(b,ra,ca.F(),ca.U(),w.array,ya,!0)):(za=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),F()),w.isKeepArray||(za&&za!==w.array&&(za=null),delete w.array)):w.Pb?Ta=!0:F();ca.ug=ca.F;w.ka&&Ta&&(w.ka(ca),w.ka=null);q.push(ca);return ca},P:function(h){h!==
n&&(b.activeTexture(p[h]),n=h);v[h]=-1;a(null)},Cf:function(h){B.random.g(h)},rc:function(){r=null;b.framebufferTexture2D(ka.Za(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==n&&b.activeTexture(p[0]);for(var h=0;h<p.length;++h)v[h]=-1;n=-1},Pg:function(){n=-1},rf:function(){for(var h=0;h<p.length;++h)O.P(h)},Sc:function(){B&&(B.random.remove(),B.Jd.remove())},ah:function(h,H){if("RGBA"===h.format||"RGBE"===h.format){var F=new Image;F.src=h.data;F.onload=function(){O.instance({isMirrorY:h.isMirrorY,
isFlipY:h.isFlipY,isFloat:!1,L:F,ka:function(T){if("RGBA"===h.format)H(T);else{var ea=h.width,wa=h.height,w=O.instance({isMirrorY:h.isMirrorY,isFloat:!0,width:ea,height:wa,isFlipY:h.isFlipY});ka.da();b.viewport(0,0,ea,wa);A.set("s43");w.u();T.g(0);la.l(!0,!0);O.P(0);H(w);b.flush();setTimeout(T.remove,50)}}})}}else"JSON"===h.format?H(O.instance({isFloat:!0,isFlipY:h.isFlipY,width:h.width,height:h.height,array:new Float32Array(h.data)})):H(!1)},ae:d,m:function(){r&&(sa.da(),O.rc(),sa.P());O.rf();q.slice(0).forEach(function(h){h.remove()});
q.splice(0);l=!1;f=0;"undefined"!==typeof Ca&&Ca.m();B=null}};return O}(),Lb=function(){return{instance:function(a){var c=[Aa.instance(a),Aa.instance(a)],d=[c[1],c[0]],e=d,k={bf:function(m){e[1].u();e[0].g(m);k.Fd()},Sg:function(m){e[1].aa();e[0].g(m);k.Fd()},Fd:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},g:function(m){e[0].g(m)},Bf:function(m){e[1].g(m)},og:function(){return e[0]},sg:function(){return e[1]},remove:function(){e[0].remove();e[1].remove();e=null}};return k}}}(),
la=function(){function a(f){var v={ba:null,J:null};v.ba=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,v.ba);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),f.STATIC_DRAW);v.J=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v.J);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),f.STATIC_DRAW);return v}var c=null,d=0,e=!1,k=[],m=-2,n=-2,p={reset:function(){n=m=-2},A:function(){e||(c=a(b),p.Da(),e=!0)},instance:function(f){var v=d++,B=f.J?f.J.length:0,r="undefined"===typeof f.mode?
b.STATIC_DRAW:f.mode,g=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,g);b.bufferData(b.ARRAY_BUFFER,f.ba instanceof Float32Array?f.ba:new Float32Array(f.ba),r);m=v;var z=null,y=null,l=null;if(f.J){z=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z);var q=null;65536>f.J.length?(q=Uint16Array,y=b.UNSIGNED_SHORT,l=2):(q=Uint32Array,y=b.UNSIGNED_INT,l=4);q=f.J instanceof q?f.J:new q(f.J);b.bufferData(b.ELEMENT_ARRAY_BUFFER,q,r);n=v}var E={Ud:function(N){m!==v&&(b.bindBuffer(b.ARRAY_BUFFER,g),m=v);
N&&va.lc()},Rd:function(){n!==v&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z),n=v)},bind:function(N){E.Ud(N);E.Rd()},Nf:function(){b.drawElements(b.TRIANGLES,B,y,0)},Of:function(N,K){b.drawElements(b.TRIANGLES,N,y,K*l)},remove:function(){b.deleteBuffer(g);f.J&&b.deleteBuffer(z);E=null}};k.push(E);return E},Da:function(){-1!==m&&(b.bindBuffer(b.ARRAY_BUFFER,c.ba),m=-1);-1!==n&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.J),n=-1)},l:function(f,v){f&&la.Da();v&&va.wa();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,
0)},Wa:function(f){f=f||b;var v=a(f);f.bindBuffer(f.ARRAY_BUFFER,v.ba);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,v.J);va.rb(f);f.clear(f.COLOR_BUFFER_BIT);f.drawElements(f.TRIANGLES,3,f.UNSIGNED_SHORT,0);f.flush();f.bindBuffer(f.ARRAY_BUFFER,null);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null);f.deleteBuffer(v.ba);f.deleteBuffer(v.J);p.reset();e&&(p.Da(),va.wa())},Sc:function(){var f=b,v=c;f.deleteBuffer(v.ba);f.deleteBuffer(v.J)},m:function(){p.Sc();k.forEach(function(f){f.remove()});b.bindBuffer(b.ARRAY_BUFFER,
null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);p.reset();e=!1;k.splice(0);d=0}};return p}(),ka=function(){var a=null,c=null,d=null,e=!1,k=[],m={I:-2,Pc:1},n={fb:function(){return e},A:function(){if(!e){a=b.createFramebuffer();var p=ba.ha();c=p&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=p&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},lg:function(){return c},xe:function(){return d},Za:function(){return b.FRAMEBUFFER},tg:function(){return m},dg:function(){return a},instance:function(p){void 0===
p.$c&&(p.$c=!1);var f=p.N?p.N:null,v=p.width,B=void 0!==p.height?p.height:p.width,r=a,g=null,z=!1,y=!1,l=0;f&&(v=v?v:f.F(),B=B?B:f.U());var q={Bd:function(){z||(r=b.createFramebuffer(),z=!0,l=m.Pc++)},Md:function(){q.Bd();q.u();g=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,g);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,B);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,g);b.clearDepth(1)},bind:function(E,N){l!==m.I&&(b.bindFramebuffer(c,r),m.I=l);f&&f.u();
N&&b.viewport(0,0,v,B);E&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Af:function(){l!==m.I&&(b.bindFramebuffer(c,r),m.I=l)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},If:function(){b.clear(b.COLOR_BUFFER_BIT)},Jf:function(){b.clear(b.DEPTH_BUFFER_BIT)},hf:function(){b.viewport(0,0,v,B)},u:function(){l!==m.I&&(b.bindFramebuffer(c,r),m.I=l)},rtt:function(E){f=E;m.I!==l&&(b.bindFramebuffer(b.FRAMEBUFFER,r),m.I=l);E.u()},P:function(){b.bindFramebuffer(c,null);m.I=-1},resize:function(E,
N){v=E;B=N;g&&(b.bindRenderbuffer(b.RENDERBUFFER,g),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,v,B))},remove:function(){r===a||y||(b.bindFramebuffer(c,r),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),g&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(r),g&&b.deleteRenderbuffer(g));y=!0}};p.$c&&q.Md();k.push(q);return q},P:function(){b.bindFramebuffer(c,null);m.I=-1},sf:function(){b.bindFramebuffer(c,
null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,ba.F(),ba.U());m.I=-1},reset:function(){m.I=-2},da:function(){0!==m.I&&(b.bindFramebuffer(c,a),m.I=0)},clear:function(){b.viewport(0,0,ba.F(),ba.U());b.clear(b.COLOR_BUFFER_BIT)},m:function(){n.P();k.forEach(function(p){p.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);n.reset();e=!1;k.splice(0);m.Pc=1}};return n}(),ba=function(){function a(){e="undefined"===typeof Qa?JEContext:Qa;k=!0}function c(l,q){for(var E=0;E<l.length;++E){var N=
q.getExtension(l[E]);if(N)return N}return null}function d(){null!==g.tb&&(clearInterval(g.tb),g.tb=null);g.Ia=!1}var e=null,k=!1,m={bd:!1,nc:null,oc:null,fd:!1,Ke:!1,pc:null,gd:!1,qc:null,cd:!1,xb:null,Fe:!1,yb:null,Ge:!1},n=null,p={fa:!0,ga:!0,Jb:!0,vd:!1},f=null,v=!0,B=null,r=null,g={Ia:!1,ra:null,$a:null,Ob:-1,sa:null,tb:null},z="undefined"===typeof window?{}:window,y={A:function(){if(k)return!0;y.reset();k||a();var l=b;if(!n.bd){n.nc=y.Lc(l);z.GL_EXT_FLOAT=n.nc;n.fd=n.nc?!0:!1;if(n.fd||y.ha())n.oc=
y.Mc(l),n.Ke=n.oc?!0:!1,z.GL_EXT_FLOATLINEAR=n.oc;n.bd=!0}if(!n.cd){n.pc=y.Va(l);n.pc&&(n.gd=!0,z.GL_EXT_HALFFLOAT=n.pc);if(n.gd||y.ha())n.qc=y.Nc(l),z.GL_EXT_HALFFLOATLINEAR=n.qc;n.zg=n.qc?!0:!1;n.cd=!0}n.xb=y.Jc(l);n.Fe=n.xb?!0:!1;z.GL_EXT_COLORBUFFERFLOAT=n.xb;n.yb=y.Kc(l);n.Ge=n.yb?!0:!1;z.GL_EXT_COLORBUFFERHALFFLOAT=n.yb;ka.A();Aa.A();if(!y.fe())return!1;la.A();Aa.Ee();return!0},reset:function(){n=Object.assign({},m);f=Object.assign({},p)},F:function(){k||a();return e.F()},U:function(){k||a();
return e.U()},ha:function(){k||a();return e.ha()},Ic:function(l){y.Jc(l);y.Kc(l);y.Lc(l);y.Mc(l);y.Va(l);y.Nc(l)},Jc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Kc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Lc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Mc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),
Va:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Nc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Lb:function(l){var q=y.Va(l);return q&&q.HALF_FLOAT_OES?q.HALF_FLOAT_OES:l.HALF_FLOAT||l.FLOAT},ue:function(){return r||b.RGBA32F||b.RGBA},ve:function(){return B||b.RGBA16F||b.RGBA},re:function(){return f},Ac:function(){return f.fa},Ef:function(){return f.ga},Df:function(){return f.Jb},
Wd:function(){return f.vd&&v},Hd:function(l){v=l;!l&&g.Ia&&(b.deleteSync(g.$a),b.bindBuffer(g.sa,null),g.Ia=!1)},sb:function(l,q,E){function N(){l.bindTexture(l.TEXTURE_2D,null);l.bindFramebuffer(K,null);l.deleteTexture(I);l.deleteFramebuffer(G)}var K=l.FRAMEBUFFER,P=l.NEAREST,G=l.createFramebuffer();l.bindFramebuffer(K,G);var I=l.createTexture();l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,I);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);
l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,P);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,P);l.texImage2D(l.TEXTURE_2D,0,q,3,3,0,l.RGBA,E,null);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,I,0);if(l.checkFramebufferStatus(l.READ_FRAMEBUFFER||l.FRAMEBUFFER)!==l.FRAMEBUFFER_COMPLETE)return N(),!1;va.jc(l);l.clearColor(0,0,0,0);l.viewport(0,0,3,3);l.disable(l.DEPTH_TEST);l.clear(l.COLOR_BUFFER_BIT);la.Wa(l);
l.bindFramebuffer(K,null);va.Ma(l);l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,I);la.Wa(l);q=new Uint8Array(36);l.readPixels(0,0,3,3,l.RGBA,l.UNSIGNED_BYTE,q);N();for(E=0;36>E;++E)if(3!==E%4&&3<Math.abs(q[E]-127))return!1;return!0},Bb:function(l){var q={fa:!1,ga:!1};l.disable(l.BLEND);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);l.RGBA32F&&y.sb(l,l.RGBA32F,l.FLOAT)&&(q.fa=!0,r=l.RGBA32F);!q.fa&&y.sb(l,l.RGBA,l.FLOAT)&&(q.fa=!0,r=l.RGBA);var E=y.Lb(l);B=null;l.RGBA16F&&y.sb(l,l.RGBA16F,
E)&&(q.ga=!0,B=l.RGBA16F);!q.ga&&y.sb(l,l.RGBA,E)&&(q.ga=!0,B=l.RGBA);return q},ge:function(){var l=ka.instance({width:2});l.Bd();var q=Aa.instance({width:2,isFloat:!0,jb:3});l.u();q.u();b.flush();b.checkFramebufferStatus(ka.xe())!==b.FRAMEBUFFER_COMPLETE?(Aa.df(),f.Jb=!1):f.Jb=!0;l.remove();q.remove()},he:function(){var l=!1;y.ha()&&(l="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(q){return"undefined"!==typeof b[q]}));
f.vd=l},fe:function(){var l=y.Bb(b);Object.assign(f,l);if(!f.fa&&!f.ga)return!1;y.ge();y.he();return!0},pb:function(l,q,E,N,K){if(!y.Wd())return b.readPixels(l,q,E,N,b.RGBA,b.UNSIGNED_BYTE,K),Promise.resolve(K);null===g.ra&&(g.sa=b.PIXEL_PACK_BUFFER,g.ra=b.createBuffer(),g.Ob=-1);b.bindBuffer(g.sa,g.ra);K.byteLength!==g.Ob&&(b.bufferData(g.sa,K.byteLength,b.STREAM_READ),g.Ob=K.byteLength);b.readPixels(l,q,E,N,b.RGBA,b.UNSIGNED_BYTE,0);g.$a=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush();return new Promise(function(P,
G){function I(){if(!g.Ia)return d(),G(),!1;switch(b.clientWaitSync(g.$a,0,0)){case b.TIMEOUT_EXPIRED:return!1;case b.WAIT_FAILED:return d(),G(),!1;default:return d(),b.deleteSync(g.$a),b.getBufferSubData(g.sa,0,K),b.bindBuffer(g.sa,null),P(K),!0}}d();g.Ia=!0;I()||(g.tb=setInterval(I,0))})},m:function(){d();Aa.m();va.m();ka.m();la.m();null!==g.ra&&(b.deleteBuffer(g.ra),g.ra=null);k=!1}};return y}(),U=la,sa=ka,Y=Aa,Ca=function(){function a(G,I,u,t){q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,
t?q.NEAREST_MIPMAP_NEAREST:q.LINEAR);var D=null;if(null!==u)try{D=q.getError();if("FUCKING_BIG_ERROR"===D)return!1;q.texImage2D(q.TEXTURE_2D,0,G,4,4,0,q.RGBA,I,u);D=q.getError();if(D!==q.NO_ERROR)return!1}catch(J){return!1}t&&q.generateMipmap(q.TEXTURE_2D);q.clear(q.COLOR_BUFFER_BIT);U.Wa(q);D=q.getError();if("FUCKING_BIG_ERROR"===D)return!1;q.readPixels(0,0,2,2,q.RGBA,q.UNSIGNED_BYTE,B);D=q.getError();D===q.INVALID_OPERATION&&"undefined"!==typeof q.PIXEL_PACK_BUFFER&&(q.bindBuffer(q.PIXEL_PACK_BUFFER,
null),q.readPixels(0,0,2,2,q.RGBA,q.UNSIGNED_BYTE,B),D=q.getError());if(D!==q.NO_ERROR)return!1;u=!0;for(t=0;16>t;++t)u=u&&4>Math.abs(B[t]-127);u&&(f.sd=I,f.Zc=G);return u}function c(G,I){return E.fa&&a(G,q.FLOAT,new Float32Array(r),I)?(p=n.uc,!0):!1}function d(G,I,u){if(!E.ga)return!1;var t=Aa.ae(r),D=ba.Va(q);if(D&&D.HALF_FLOAT_OES&&a(G,D.HALF_FLOAT_OES,t,I)||q.HALF_FLOAT&&a(G,q.HALF_FLOAT,t,I))return p=n.Aa,!0;t=new Float32Array(r);if(a(G,q.FLOAT,t,I))return p=n.Aa,!0;q.bindTexture(q.TEXTURE_2D,
u);q.texImage2D(q.TEXTURE_2D,0,q.RGBA,2,2,0,q.RGBA,q.UNSIGNED_BYTE,null);q.bindFramebuffer(f.Ta,P);Aa.Qc(q,u,2,2,t,!1,!1);q.bindFramebuffer(f.Ta,null);q.bindTexture(q.TEXTURE_2D,u);return a(G,null,null,I)?(p=n.Aa,!0):!1}function e(G,I,u){v=!0;if(d(G,!0,u)||c(I,!0))return!0;v=!1;return d(G,!1,u)||c(I,!1)?!0:!1}function k(G){if(p===n.R){q=G||b;p=n.RGBA8;v=!0;ba.Ic(q);E||(E=ba.Bb(q));sa.reset();P=q.createFramebuffer();f.Ta=q.DRAW_FRAMEBUFFER||q.FRAMEBUFFER;q.bindFramebuffer(f.Ta,null);q.clearColor(0,
0,0,0);q.viewport(0,0,2,2);A.R();N=A.Ma(q);G=q.createTexture();q.activeTexture(q.TEXTURE0);q.bindTexture(q.TEXTURE_2D,G);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.REPEAT);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);K=G;var I=G=q.RGBA,u=q.RGBA16F,t=q.RGBA32F;t&&(G=t);u&&(I=u);if((u||t)&&e(I,G,K))return m(),!0;G=I=q.RGBA;if(e(I,G,K))return m(),!0;p=n.RGBA8;m();return!1}}function m(){q.deleteProgram(N.na);q.deleteTexture(K);
K=N=null}for(var n={R:-1,uc:3,Aa:2,RGBA8:0},p=n.R,f={sd:null,Zc:null,Ta:null},v=!0,B=new Uint8Array(16),r=Array(64),g=0;4>g;++g)for(var z=0;4>z;++z){var y=0===(z+g)%2?1:0,l=4*g+z;r[4*l]=y;r[4*l+1]=y;r[4*l+2]=y;r[4*l+3]=y}var q=null,E=null,N=null,K=null,P=null;return{Vd:function(G){k(G);return v},zc:function(G,I){p===n.R&&(typeof("undefined"!==I)&&(E=I),k(G));return p!==n.RGBA8},Cg:function(G){k(G);return p===n.uc},Le:function(G){k(G);return p===n.Aa},mg:function(G){k(G);return f.sd},we:function(G){k(G);
return f.Zc},m:function(){q=null;v=!0;p=n.R;E=null}}}(),Ub=function(){return{instance:function(a){var c=Y.instance(a.alpha),d=Y.instance(a.beta);return{je:function(){c.g(1);d.g(2)}}}}}(),Ib=function(){return{instance:function(a){var c=null,d=!1,e=!1,k=null,m=!1,n=!1,p=null,f="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,Z&&void 0!==Z.Qd&&(a.mask=Z.Qd+a.mask),c=Y.instance({isFloat:!1,url:a.mask}));var B=!1;
a.customInputShader&&(B="s44",A.vc({name:"_",id:B,h:a.customInputShader,$g:["uSource"],precision:"lowp"}),A.T(B,[{type:"1i",name:"_",value:0}]));switch(f){case "sobel":p="s31";m=!0;break;case "meanNormalization":p="s32";m=!0;break;case "grayScale":p="s28";m=!1;break;case "grayScaleTilt":p="s29";n=!0;m=!1;break;case "rgbGrayTilt":p="s30";n=!0;m=!1;break;case "copy":p=B?B:"s0";break;case "inputLightRegulation":p=B?B:"s28";k=Vb.instance({Yc:v,rd:a.size,nd:a.nBlurPass,eb:!1});e=!0;break;case "inputMix0":p=
"none";k=Wb.instance({D:v,Ld:a.varianceMin,yc:a.blurKernelSizePx,eb:!1});e=!0;break;case "direct":case "none":p="abort";break;default:p="s3"}n&&A.T(p,[{name:"u26",type:"1f",value:a.tilt}]);d&&(p+="Mask");var r=Y.instance({isFloat:!1,isPot:!1,width:a.size}),g={F:function(){return v},Mb:function(){return g.F()},Ae:function(){return e?k.Nb():r},V:function(z){sa.da();"abort"!==p&&("none"!==p&&(A.set(p),m&&A.H("u27",1/a.size),r.aa(),d&&c.g(1),U.l(!1,!1),r.g(0),z=r),e&&k.process(z))},m:function(){r.remove();
d&&c.remove()}};return g}}}(),Jb=function(){return{instance:function(a){function c(h){k.forEach(function(H,F){m[F][0]=h[0][H];m[F][1]=h[1][H];m[F][2]=h[2][H];m[F][3]=h[3][H]});return m}"undefined"===typeof a.normalize&&(a.normalize=!1);var d={input:null,Qa:null,Sb:null,Z:null,lb:null,cc:null,dc:null},e=null,k=[],m=[],n=!1,p=null,f=!0,v=-1,B=a.isReorganize?a.isReorganize:!1,r=a.kernelsCount?!0:!1,g=a.dynPelu?Ub.instance(a.dynPelu):!1,z=g?!0:!1,y={isEnabled:!1};a.Je?(a.sparsity="undefined"!==typeof a.sparsity?
a.sparsity:a.nb.Mb(),f=!1):"full"===a.connectivityUp&&(a.sparsity=a.nb.Mb());var l={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],q=a.sparsity*a.sparsity,E=!1,N=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s33";break;case 4:K="s34"}E=!0;N/=a.maxPooling.size;d.cc=Y.instance({isFloat:!0,isPot:!1,width:N})}var P=void 0!==a.Re&&a.Re?!0:!1,G=null,I=null,u=null;if(P){G="s45"+a.index.toString();A.Xc("s45",G,[((a.normalization.n-
1)/2).toFixed(1)]);A.T(G,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u30",value:a.normalization.k}]);var t={isFloat:!0,isPot:!0,width:a.size};I=Y.instance(t);u=Y.instance(t)}var D=-1,J=null;f&&(d.Z=Y.instance({isFloat:!0,isPot:!1,width:a.size}));d.Qa=Y.instance(a.bias);var O={F:function(){return a.size},Mb:function(){return N},Tc:function(){return a.classesCount},
Sd:function(h){e.g(h)},Ue:function(){a.remap&&a.remap.isEnabled&&(y={isEnabled:!0,Ne:Y.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),gb:a.remap.layers.map(function(h){return a.parent.ze(h)}),depth:a.remap.depth})},ef:function(){switch(a.connectivityUp){case "direct":J=Xb.instance(a.connectivity);break;case "square":J=Yb.instance(a.connectivity);break;case "squareFast":J=Zb.instance(a.connectivity,a.activation);break;case "full":J=
$b.instance(a.connectivity);break;case "conv":v=a.kernelsCount,J=ac.instance(a.connectivity),B&&(d.lb=Y.instance({width:N,isFloat:!0,isFlipY:!1,isPot:!1}))}if(J.xa){var h=a.size*a.sparsity;D=Math.log(h/a.size)/Math.log(2);d.input=Y.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:h,Xb:D});d.Sb=Y.instance({isFloat:!0,isPot:!0,width:a.size})}},V:function(h,H){e=h;J.xa?(d.input.aa(),r&&d.Qa.g(2),J.V(y),d.input.g(0),d.input.oe(D),d.Sb.aa(),r?A.set("s0"):(A.set("s27"),A.H("u25",q),d.Qa.g(1)),d.input.Td(D,
0),U.l(!1,!1),A.set(l),P?I.u():d.Z.u(),d.Sb.g(0),z&&g.je(),U.l(!1,!1)):(d.Z.aa(),d.Qa.g(1),J.V());P&&(A.set(G),u.u(),I.g(0),U.l(!1,!1),A.set("s46"),A.H("u6",1),d.Z.u(),u.g(1),U.l(!1,!1));if(f)return E?(d.cc.aa(),d.Z.g(0),A.set(K),A.oa("u7",1/a.size,1/a.size),U.l(!1,!1),H=d.cc):H=d.Z,H.g(0),B&&(d.lb.u(),A.set("s21"),A.oa("u12",v,N/v),U.l(!1,!1),H=d.lb,d.lb.g(0)),H;var F=d.Z;a.normalize&&(A.set("gpuRawAvg"===n?"s8":"s7"),A.H("u4",1/a.size),d.dc.aa(),d.Z.g(0),U.l(!1,!1),F=d.dc);h=null;switch(n){case "cpuRGBA2Float":F.Fc(!1);
H?h=O.Ve(F).then(p):(F=O.We(F),p(F));break;case "cpuMeanFloat":F.Fc(!0);H?h=F.Ye().then(p):(F=F.Ze(),p(F));break;case "gpuRawAvg":case "gpuRaw":F.g(0);case "none":null!==p&&p(F)}H&&null===h&&(h=Promise.resolve());return h},ce:function(h){h&&(n=h.ec||"none",p=h.bc||null);d.Z=Y.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});h="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var H=0,F=0,T=0;H<h;++H)k.push(F+(a.size-1-T)*a.size),m.push([-1,-1,-1,-1]),++F,
F===a.size&&(F=0,++T);a.normalize&&(d.dc=Y.instance({isFloat:!0,isPot:!0,width:a.size}))},Ve:function(h){return h.Xe().then(c)},We:function(h){h=h.wd();c(h);return m},m:function(){for(var h in d){var H=d[h];H&&H.remove()}J&&(J.m(),J=null)}};a.nb&&O.ef(a.nb);return O}}}(),Xb=function(){return{instance:function(a){var c=Y.instance(a.weights);return{xa:!0,Ya:function(){return 1},m:function(){c.remove()},De:function(){return c},V:function(){A.set("s26");c.g(1);U.l(!1,!1)}}}}}(),$b=function(){return{instance:function(a){var c=
a.fromLayerSize,d=Y.instance(a.weights);return{xa:!0,Ya:function(){return c},m:function(){d.remove()},V:function(e){if(e.isEnabled){A.set("s24");e.Ne.g(3);var k,m=Math.min(e.gb.length,e.depth);for(k=0;k<m;++k)e.gb[k].Sd(4+k)}else A.set("s23");A.H("u16",a.toLayerSize);d.g(1);U.l(!1,!1)}}}}}(),Yb=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,k=e*d,m=k/c,n=c/d,p=0,f=0,v=0,B=Array(e*d*e*d*4),r=Array(e*d*e*d*4),g=Array(c*c),z=0;z<g.length;++z)g[z]=0;z=
Math.floor(e/2);for(var y=.5/d,l=.5/c,q=.5/k,E=0;E<d;++E)for(var N=Math.round(E*n),K=0;K<d;++K){var P=Math.round(K*n),G=E/d,I=K/d;G+=y;I+=y;for(var u=0;u<e;++u){var t=N+u-z;0>t&&(t+=c);t>=c&&(t-=c);for(var D=0;D<e;++D){var J=p/k,O=f/k,h=P+D-z;0>h&&(h+=c);h>=c&&(h-=c);var H=t/c,F=h/c;O=1-O-1/k;H+=l;F+=l;J+=q;O+=q;var T=E*e+u,ea=K*e+D;ea=d*e-ea-1;T=ea*d*e+T;B[4*T]=J;B[4*T+1]=O;B[4*T+2]=H;B[4*T+3]=F;F=g[h*c+t]++;T=F%m;H=t*m+T;h=h*m+(F-T)/m;h=c*m-1-h;h=h*c*m+H;r[4*h]=J;r[4*h+1]=O;r[4*h+2]=G;r[4*h+3]=
I;++p>=k&&(p=0,++f);++v}}}g=null;var wa=Y.instance(a.weights);delete a.weights.data;var w=Y.instance({width:k,isFloat:!0,array:new Float32Array(r),isPot:!0});r=null;var qa=Y.instance({width:k,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{xa:!0,Ya:function(){return m},m:function(){w.remove();qa.remove();wa.remove()},V:function(){A.set("s22");wa.g(1);qa.g(2);U.l(!1,!1)}}}}}(),ac=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,
k=Y.instance(a.weights);return{xa:!0,Ya:function(){return e},wg:function(){return d},De:function(){return k},m:function(){k.remove()},V:function(){A.set("s25");A.H("u22",c);A.H("u23",d);A.H("u16",a.toLayerSize);A.H("u24",a.fromLayerSize);k.g(1);U.l(!1,!1)}}}}}(),Zb=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,k=a.toSparsity,m=a.stride?a.stride:1,n=k*e/d,p=e<d,f=d/e,v=Y.instance(a.weights),B="s47"+[d.toString(),e.toString(),k.toString(),m.toString(),c].join("_");A.le(B)||
(a=Rb.pe(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u29",value:m}],p&&e.push({type:"1f",name:"u24",value:d}),d=[(p?n:k).toFixed(1),a],p&&d.push(f.toFixed(1)),A.Xc(p?"s39":"s38",B,d),A.T(B,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{xa:!1,Ya:function(){return n},m:function(){v.remove()},V:function(){A.set(B);v.g(3);U.l(!1,!1)}}}}}(),Vb=function(){return{instance:function(a){var c=a.nd?a.nd:
3,d=a.Yc?a.Yc:64,e=a.rd?a.rd:64,k=a.eb?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=Y.instance(a),n=Y.instance(a),p=Y.instance(a),f=Y.instance(a),v=Y.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),B=1/d;return{process:function(r){A.set("s35");f.u();U.l(k,!1);A.set("s36");for(var g=0;g<c;++g)m.u(),A.oa("u7",B,0),U.l(k,!1),p.u(),f.g(0),U.l(k,!1),n.u(),m.g(0),A.oa("u7",0,B),U.l(k,!1),f.u(),p.g(0),U.l(k,!1),g!==c-1&&n.g(0);A.set("s37");v.u();r.g(0);n.g(1);f.g(2);U.l(k,!1);v.g(0)},Nb:function(){return v}}}}}(),
Wb=function(){return{instance:function(a){function c(v){return Y.instance({isFloat:v,width:d.D,isPot:!1,isFlipY:!1})}var d=Object.assign({Ld:.1,yc:9,D:128,eb:!1},a),e=c(!1),k=[c(!1),c(!1),c(!1)],m=[c(!1),c(!1),c(!1)],n=c(!0),p=[e,m[0],m[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.yc-1)/2).toFixed(2)).replace("2.2222",(1/d.D).toFixed(6));var f={u1:0};A.wc([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:f,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:f,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,h=texture2D(u35,vv0).r,i=a.r*a.r;vec3 b=vec3(c,d,h),j=max(g*f,abs(i-b*b)),k=sqrt(j);gl_FragColor=vec4(a.r,(a-b)/k);}".replace("1.1111",
d.Ld.toFixed(4)),j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){A.set("s49");e.aa();U.l(d.eb,!1);A.set("s50");for(var v=0;3>v;++v)A.oa("u31",1,0),k[v].u(),p[v].g(0),U.l(!1,!1),A.oa("u31",0,1),m[v].u(),k[v].g(0),U.l(!1,!1);A.set("s51");n.u();e.g(0);m[0].g(1);m[1].g(2);m[2].g(3);U.l(!1,!1);n.g(0)},Nb:function(){return n}}}}}(),W={Ce:function(){return W.Ec()?document.createElement("video"):!1},Ga:function(a,c){a[c]=!0;a.setAttribute(c,"true")},
Zd:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Bc:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},qe:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},hd:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Yd:function(){return W.Cc()||W.Bc()},Cc:function(){var a=navigator.userAgent.toLowerCase();
return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},bg:function(){return W.Zd()?W.hd()?window.innerHeight/window.innerWidth*45:45:45},Ec:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Qg:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Dc:function(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};
"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c},Gd:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},be:function(a){function c(g){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,
y){return Math.abs(z-g)-Math.abs(y-g)})}function d(g){var z=W.Dc(a);g=g(z);k.push(g);e(g)}function e(g){if(g.video&&g.video.facingMode&&g.video.facingMode.exact){var z=g.video.facingMode.exact;g=W.Dc(g);delete g.video.facingMode.exact;g.video.facingMode.ideal=z;k.push(g)}}var k=[];if(!a||!a.video)return k;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var m=c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),p={},f=0;for(p.ja=void 0;f<m.length;p=
{ja:p.ja},++f){p.ja=m[f];var v={},B=0;for(v.ia=void 0;B<n.length;v={ia:v.ia},++B)if(v.ia=n[B],p.ja!==a.video.width.ideal||v.ia!==a.video.height.ideal){var r=Math.max(p.ja,v.ia)/Math.min(p.ja,v.ia);r<4/3-.1||r>16/9+.1||d(function(g,z){return function(y){y.video.width.ideal=g.ja;y.video.height.ideal=z.ia;return y}}(p,v))}}}d(function(g){return W.Gd(g)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(g){delete g.video.width.ideal;delete g.video.height.ideal;return g}),
d(function(g){delete g.video.width;delete g.video.height;return g}));a.video.facingMode&&(d(function(g){delete g.video.facingMode;return g}),a.video.width&&a.video.height&&d(function(g){W.Gd(g);delete g.video.facingMode;return g}));k.push({audio:a.audio,video:!0});return k},mf:function(a){if(W.hd()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},ib:function(a){a.volume=0;W.Ga(a,
"muted");if(W.Cc()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;W.Ga(a,"muted")},5)}},Id:function(a,c,d){return new Promise(function(e,k){if(a.srcObject&&a.srcObject.getVideoTracks){var m=a.srcObject.getVideoTracks();1!==m.length?k("INVALID_TRACKNUMBER"):(m=m[0],c?W.get(a,e,k,d):(m.stop(),
e()))}else k("BAD_IMPLEMENTATION")})},Wc:function(a,c,d,e){function k(n){m||(m=!0,d(n))}var m=!1;return navigator.mediaDevices.getUserMedia(e).then(function(n){function p(){setTimeout(function(){if(a.currentTime){var f=a.videoWidth,v=a.videoHeight;if(0===f||0===v)k("VIDEO_NULLSIZE");else{f&&(a.style.width=f.toString()+"px");v&&(a.style.height=v.toString()+"px");f={Xd:null,jf:null,Oe:null};try{var B=n.getVideoTracks()[0];B&&(f.Oe=B,f.Xd=B.getCapabilities(),f.jf=B.getSettings())}catch(r){}W.Yd()?a.parentNode&&
null!==a.parentNode?(m||c(a,n,f),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),W.ib(a),m||c(a,n,f),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";W.ib(a);setTimeout(function(){a.play()},100)},80)):m||c(a,n,f)}}else k("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);W.ib(a);a.addEventListener("loadeddata",function(){var f=
a.play();W.ib(a);"undefined"===typeof f?p():f.then(function(){p()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(n){k(n)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),!1;if(!W.Ec())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(W.Bc()){var k=W.qe();0!==k[0]&&(12>k[0]||12===k[0]&&2>k[1])&&W.mf(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+
"px")}W.Ga(a,"autoplay");W.Ga(a,"playsinline");e&&e.audio?a.volume=0:W.Ga(a,"muted");W.Wc(a,c,function(){function m(p){if(0===p.length)d("INVALID_FALLBACKCONSTRAINTS");else{var f=p.shift();W.Wc(a,c,function(){m(p)},f)}}var n=W.be(e);m(n)},e)},Be:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&
d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Ff:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},Ba=function(){var a={n:5,Zb:1,kd:0,Xa:[30,45],Ua:[2,200],k:.7,tf:200,Te:.05},c=-1,d=null,e=-1,k=-1,m=0,n=-1,p=-1,f=0,v=0,B=a.Ua[1],r={Uc:function(){switch(c){case -1:return-1;case 0:return p+d.kd;case 1:return f}},fg:function(g){return Math.pow(Math.min(Math.max(n,0),d.n-1)/(d.n-1),
g||1)},A:function(g){d=Object.assign({},a,g);n=p=d.Zb;c=0;r.reset()},pf:function(g){g=("undefined"===typeof g?Date.now():g)||0;var z=Math.min(Math.max(g-v,d.Ua[0]),d.Ua[1]);B=z;v=g;var y=-1===e?0:d.k;e=Math.min(Math.max(1E3/z,5),120)*(1-y)+e*y;g-k>d.tf&&5<++m&&(z=d.k,n=n*(1-z)+(e<d.Xa[0]?p-1:e>d.Xa[1]?p+1:p)*z,Math.abs(n-p)>1-d.Te&&(z=Math.min(Math.max(Math.round(n),0),d.n-1),z!==p&&(n=p=z,e=(d.Xa[1]-d.Xa[0])/2)),k=g)},Cd:function(g){f=g;c=1},Kd:function(){c=0;r.reset()},reset:function(){B=a.Ua[1];
k=e=-1;m=0},te:function(){return B}};return r}(),Ma=function(){function a(){d(B+f.Yb)}function c(){z.Oa=0===f.Na?window.requestAnimationFrame(d):window.requestAnimationFrame(e)}function d(E){g.va&&null!==v&&(E-=B,E=Math.min(Math.max(E,f.Gc[0]),f.Gc[1]),B+=E,m(),v(B))}function e(E){g.va&&(z.timeout=window.setTimeout(d.bind(null,E),f.Na))}function k(){v=null;g.va=!1;m()}function m(){z.Oa&&(window.cancelAnimationFrame(z.Oa),z.Oa=null);z.timeout&&(window.clearTimeout(z.timeout),z.timeout=null)}function n(E){E?
(g.Ja=!0,r.port.postMessage("STOP"),ba.Hd(!0),c()):(g.Ja=!1,ba.Hd(!1),r.port.postMessage("START"))}var p={dd:!0,Gc:[1,200],Yb:50,Na:0},f=null,v=null,B=0,r=null,g={ma:!1,Ja:!0,Wb:!1,Vb:!1,Tb:!1,va:!1},z={Oa:null,timeout:null},y=n.bind(null,!0),l=n.bind(null,!1),q={A:function(E){f=Object.assign(p,E);Object.assign(g,{Ja:!0,ma:!0,va:!1});if(f.dd){E=!1;try{if("undefined"===typeof SharedWorker){var N=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
f.Yb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),K=new Worker(N);K.addEventListener("message",a);r={ud:K,port:K};g.Wb=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
f.Yb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),G=new SharedWorker(P);G.port.start();G.port.addEventListener("message",a);r={ud:G,port:G.port};g.Vb=!0}E=!0}catch(I){}E&&(window.addEventListener("blur",
l),window.addEventListener("focus",y),g.Tb=!0)}},m:function(){k();g.Tb&&(window.removeEventListener("blur",l),window.removeEventListener("focus",y),g.Tb=!1);g.Vb?(r.port.close(),g.Vb=!1):g.Wb&&(r.ud.terminate(),g.Wb=!1);Object.assign(g,{Ja:!0,ma:!1,va:!1});v=null},update:function(E){Object.assign(f,E)},$e:function(E){g.ma||q.A({});m();g.va=!0;v=E;g.Ja&&c()},stop:k};return q}(),wb=function(){var a={pd:4,mb:[1.5,1.5,2],O:[.1,.1,.1],yd:1,D:-1,M:-1,lf:2,Se:1,zd:!0,ke:.8},c=null,d=[],e=0,k=[.5,.5,1];return{A:function(m){c=
Object.assign({},a,m);d.splice(0);m=c.mb[0]*c.O[0];var n=c.mb[1]*c.O[1],p=1/(1+c.mb[2]*c.O[2]),f=c.yd*Math.min(c.D,c.M),v=f/c.D;f/=c.M;var B=.5*c.ke;B*=B;for(var r=0;r<c.pd;++r){var g=Math.pow(p,r),z=v*g,y=f*g;g=z*m;var l=y*n,q=z/2;y/=2;for(var E=1+(1-q-q)/g,N=1+(1-y-y)/l,K=0;K<N;++K)for(var P=y+K*l,G=P-.5,I=0;I<E;++I){var u=q+I*g,t=u-.5;t*t+G*G>B||d.push([u,P,z*c.Se])}}c.zd&&d.sort(function(D,J){var O=D[0]-.5;D=D[1]-.5;var h=J[0]-.5;J=J[1]-.5;return O*O+D*D-(h*h+J*J)})},get:function(){var m=d.length;
if(0===m)return k;e>=m&&(e=0);var n=d[Math.floor(e)];e=(e+1/c.lf)%m;return n}}}(),Z={neuralNetworkPath:"NN_DEFAULT.json",ca:0,ub:[2,7],af:{threshold:1,nScaleLevels:2,scale0Factor:.8,overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1},qf:50,md:.5,ld:.4,Pe:8,kf:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},Ka:[.65,1,.262],O:[.092,.092,.3],Nd:.2,Pd:2,Od:.1,Qe:8,od:1,me:Ya.hb.bind(null,
.3,.7),wf:20,ee:!0,Ed:3},na={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},fa={$b:-3,Me:-1,error:-2,ready:1,play:2,pause:3},ma=fa.$b,x=null,bc={bb:!1,mc:null,element:null,N:null,G:[0,0],K:[.5,.5],v:[.5,0,0,.5],ob:0,Fa:null,ab:!1},M=null,cc={Ea:null,Ra:null,antialias:!0,tc:"./",za:null,ea:null,ca:Z.ca,td:Z.ca,cb:!1,qa:!0},Oa=null,oa=null,ua=null,Pa=1,Na={ic:-1,Cb:-1},aa=null,dc={D:0,M:0,G:[0,0],ua:null},X={ya:null,buffer:null,
O:null,Ka:null,Y:Z.od,Ha:null},Sa=null,pa=null,L={o:1,la:0,W:null,ed:!1,jd:0,ac:0},hb=[],ib=[],Gb={VERSION:"2.1.2",init:function(a){function c(){ma!==fa.error&&2===++e&&(Ja(),Ab(),Ia(),M.Ea&&(ma=fa.ready,M.Ea(!1,{GL:b,canvasElement:M.ea,videoTexture:x.N.get(),videoTransformMat2:x.v,maxFacesDetected:L.o,videoElement:x.element}),eb()),db())}if(ma!==fa.$b)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ma=fa.Me;x=Object.assign({},bc);M=Object.assign({},cc);aa=Object.assign({},dc);L.W=
[0];X.O=Z.O.slice(0);X.Ka=Z.Ka.slice(0);"undefined"!==typeof a.antialias&&(M.antialias=a.antialias);a.callbackReady&&(M.Ea=a.callbackReady);a.callbackTrack&&(M.Ra=a.callbackTrack);a.nExpressions&&(X.Y=a.nExpressions);a.expressionsEasings&&(X.Ha=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&(M.ca=a.animateDelay);"undefined"!==typeof a.NNCPath&&(M.tc=a.NNCPath);"undefined"!==typeof a.NNC&&(M.za=a.NNC);"undefined"!==typeof a.maxFacesDetected&&(L.o=Math.max(1,a.maxFacesDetected));"undefined"!==
typeof a.followZRot&&(M.qa=a.followZRot?!0:!1);if(L.o>Z.Pe)return Ha("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ha("NO_CANVASID"),!1;M.ea=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!M.ea)return Ha("INVALID_CANVASID"),!1;aa.D=M.ea.width;aa.M=M.ea.height;if(!aa.D||!aa.M)return Ha("INVALID_CANVASDIMENSIONS"),!1;for(var d=0;d<L.o;++d)hb.push(new Float32Array(Z.Qe)),ib.push(0);Ma.A({dd:a.isKeepRunningOnWinFocusLost||!1,Na:M.ca});Ba.A({Zb:0,n:Z.ub[1]-Z.ub[0]+1,kd:Z.ub[0]});oa=
Object.create(Z.af);a.scanSettings&&(Object.assign(oa,a.scanSettings),-1!==oa.nDetectsPerLoop?Ba.Cd(oa.nDetectsPerLoop):Ba.Kd());ua=Object.create(Z.kf);a.stabilizationSettings&&Object.assign(ua,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?Za(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(na,a.videoSettings),Cb(a.onWebcamAsk,a.onWebcamGet,function(k){Za(k,c)}));Nb(function(k){if(!Ob())return!1;Oa=new Hb({gb:k.layers,ec:"gpuRawAvg",bc:Qb});A.wc([{id:"s53",
name:"_",pa:"attribute vec2 a0;uniform mat2 u36;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u36*a0;}",Pa:["a0"],Ba:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u36"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",pa:"attribute vec2 a0;uniform sampler2D u37;uniform mat2 u36;uniform vec2 u38;uniform float u39,u40,u41;varying vec2 vv0;void main(){vec4 a=texture2D(u37,vec2(.17,u39));vec2 f=a.gb,g=a.a*u38,b=a0;b.x*=u41;float c=cos(u40),d=sin(u40);vec2 h=mat2(c,d,-d,c)*b,i=f+h*.5*g,j=i-.5;vv0=.5+2.*u36*j,gl_Position=vec4(a0,0.,1.);}",
Pa:["a0"],Ba:[2],i:"u1 u37 u38 u39 u40 u41 u36".split(" "),precision:"lowp"},{id:"s55",name:"_",h:"uniform sampler2D u42,u37;uniform vec3 u43,u44;uniform float u45,u46,u39,u47,u40,u48;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 d=texture2D(u42,vec2(.625,.625)),f=texture2D(u42,vec2(.875,.625)),a=texture2D(u37,vec2(.17,u39));float g=dot(d-f,e);bool h=g>u46;h?a.r=2.:a.r>u45?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u47;if(a.r<.9)a=vec4(1.,u43);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u42,vec2(.875,.875))),j=dot(e,texture2D(u42,vec2(.125,.625))),k=dot(e,texture2D(u42,vec2(.375,.625))),b=cos(u40),c=sin(u40);vec2 l=mat2(b,c*u48,-c/u48,b)*vec2(i,j);a.gba+=vec3(l,k)*u44*a.a;}gl_FragColor=a;}",
pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u42 u37 u43 u45 u44 u47 u40 u48 u46 u39".split(" ")},{id:"s56",name:"_",pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u42,vec2(.125,.875))),b=dot(e,texture2D(u42,vec2(.375,.875))),c=dot(e,texture2D(u42,vec2(.625,.875))),d=dot(e,texture2D(u42,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
i:["u42"]},{id:"s57",name:"_",pa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u42,vec2(.375,.375))),b=dot(e,texture2D(u42,vec2(.625,.375))),c=dot(e,texture2D(u42,vec2(.875,.375))),d=dot(e,texture2D(u42,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",i:["u42"]},{id:"s52",name:"_",h:"uniform sampler2D u37;uniform vec2 u49;uniform float u50;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u37,vv0+u49);a.a=mix(a.a*u50,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
i:["u37","u50","u49"]}]);vb();Mb();kb();jb();c()});return!0},destroy:function(){Ma.m();return new Promise(function(a,c){function d(){aa.ua=null;X.ya=null;x.N=null;ma=fa.$b}Gb.toggle_pause(!0,!0).finally(function(){Oa&&Oa.m();Qa.m();Oa=pa=Sa=null;hb.splice(0);ib.splice(0);d();a()}).catch(function(e){d();c(e)})})},toggle_pause:function(a,c){if(!Xa())return Promise.reject("NOT_READY");var d=null;d=x.ab?Promise.resolve():c?W.Id(x.element,!a,x.Fa):Promise.resolve();a?rb():d.then(function(){db()});return d},
update_videoSettings:function(a){rb();return new Promise(function(c){W.Id(x.element,!1,x.Fa).then(function(){Object.assign(na,a);Cb(null,null,function(d){Za(d,function(){Ja();Ia();db();c()})})})})},toggle_slow:function(a){Xa()&&ma===fa.play&&(a&&!M.cb?(M.td=M.ca,oa.nDetectsPerLoop=1,this.set_animateDelay(Z.yf),M.cb=!0):!a&&M.cb&&(oa.nDetectsPerLoop=-1,this.set_animateDelay(M.td),M.cb=!1))},set_animateDelay:function(a){M.ca=a;Ma.update({Na:M.ca})},resize:function(){if(!Xa())return!1;var a=M.ea.width,
c=M.ea.height;if(!lb()&&a===aa.D&&c===aa.M)return!1;aa.D=a;aa.M=c;A.R();kb();jb();Ja();Ia();return!0},set_inputTexture:function(a,c,d){x.G[0]=c;x.G[1]=d;x.N=Y.instance({width:c,height:d,Pb:a});x.bb=!0;Ja();eb();Ia()},reset_GLState:function(){eb();aa.ua.remove();X.ya.remove();vb()},render_video:function(){sa.P();A.set("s53");b.viewport(0,0,aa.D,aa.M);x.N.g(0);U.l(!0,!0)},reset_inputTexture:function(){x.bb=!1;x.N=x.mc;lb();Ja();Ia()},get_videoDevices:function(a){return W.Be(a)},set_scanSettings:function(a){Object.assign(oa,
a);-1!==oa.nDetectsPerLoop?Ba.Cd(oa.nDetectsPerLoop):Ba.Kd();kb();jb()},set_stabilizationSettings:function(a){Object.assign(ua,a)},set_videoOrientation:function(a,c){Xa()&&(na.flipX=c,na.rotate=a,Ja(),Ia())},update_videoElement:function(a,c){Za(a?a:x.element,function(){Ab();Ja();Ia();c&&c()})},create_new:function(){return window.JEEFACEFILTERAPIGEN()}};return Gb};window.JEEFACEFILTERAPI=window.JEEFACEFILTERAPIGEN();
;return JEEFACEFILTERAPI||window.JEEFACEFILTERAPI;})();