<!DOCTYPE html>
<!-- By Ada Rose Edwards @lady_ada_king. -->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>EV-VR</title>
    <!-- Origin Trial Token, feature = WebVR (For Chrome M62+), origin = https://aframe.io, expires = 2017-12-29 -->
    <meta name="description" content="EV-VR is India's biggest B-School fest@XLRI in Virtual Reality experience brought to you by Ensemble Valhalla Team.">
    <meta property="og:image" content="https://raw.githubusercontent.com/ngokevin/kframe/master/components/text-geometry/examples/vaporwave/preview.jpg"></meta>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.0/dist/aframe-extras.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-animation-component@^5.1.2/dist/aframe-animation-component.min.js"></script>
    -->
      <script>
        AFRAME.registerComponent('navigate-on-click', {
              schema: {
              url: {default: ''}
              },
              init: function () {
              var data = this.data;
              var el = this.el;
            
              el.addEventListener('click', function () {
                  console.log("working")
                  //document.querySelector('#logos').setAttribute("animation","property: visible; from: true; to: false; dur: 400;");
                  //document.querySelector('#logos').setAttribute('visible','false');
                  document.querySelector("#cameraWrapper").setAttribute("animation","property: position; to: 0 0 -2.1; dur: 2000; easing: linear; loop: false")
                  document.querySelector("#fancything").setAttribute("position","0 10 -17.1")
                  document.querySelector('#ui1s').setAttribute('visible','true');
                  document.querySelector('#ui2s').setAttribute('visible','true');
                  document.querySelector('#ui3s').setAttribute('visible','true');
                  //moveCamera(-0.1, 0.85)
                  if (data.url != "") {
                    window.location.href = data.url;  
                  }
                  
                  
              });
              }
          }); 
          
          var start, x_start, y_start, x_rotation, y_rotation;
    var duration = 1000;
    

    function moveCamera(x_destination, y_destination) {
      var camera = document.querySelector("a-camera");
        start = null;
        x_start = camera.components["look-controls"].pitchObject.rotation.x;
        x_rotation = x_destination - x_start;
        y_start = camera.components["look-controls"].yawObject.rotation.y;
        y_rotation = y_destination - y_start;
        requestAnimationFrame(step);
    }

    function step(timestamp) {
      var camera = document.querySelector("a-camera");
        if (start === null) start = timestamp;
        var progress = timestamp - start;
        camera.components["look-controls"].pitchObject.rotation.x = x_start + x_rotation * progress / duration;
        camera.components["look-controls"].yawObject.rotation.y = y_start + y_rotation * progress / duration;
        if (progress < duration) {
            requestAnimationFrame(step);
        }
    }
    </script>
  </head>
  <body>
    <a-scene>
        
      <a-assets>
        <img id="pink" src="https://img.gs/bbdkhfbzkk/stretch/http://i.imgur.com/1hyyIUi.jpg" crossorigin="anonymous" />
        <img src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" id="grid" crossorigin="anonymous">
        <img src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg" id="chrome" crossorigin="anonymous">
        <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
        <img id="logo" src="SponsTemplateBlack_v1.png" crossorigin="anonymous">
        <img id="ui1" src="1.png">
        <img id="ui2" src="2.png">
        <img id="ui3" src="3.png">
          
      </a-assets>
      <a-entity id='cameraWrapper' position="0 0 0" >
        <a-camera wasd-controls-enabled="true" look-controls="reverseMouseDrag:true" cursor="rayOrigin: mouse">
            
        </a-camera>
      </a-entity>
      <a-image src="#ui1" navigate-on-click="url: /spon.html" id="ui1s"  visible ='false' position = "-2 2 -4" animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
      animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave" rotaion="0 40 0"></a-image>
      <a-image src="#ui2" navigate-on-click="url: https://goo.gl/maps/CL7pQicdVsy44YXY8"  id="ui2s" visible ='false' position = "0 2 -4" animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
      animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-image>
      <a-image src="#ui3" navigate-on-click="url: /shop.html" id="ui3s" visible ='false' position = "2 2 -4" animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
      animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-image>
        

      <a-entity id='fancything' animation="property: rotation; to: 0 0 360; dur: 10000; easing: linear; loop: true" scale="2 2 2" geometry="primitive: torusKnot" position="0 10 -15" material="color: magenta; metalness:1; roughness: 0.1; sphericalEnvMap: #sky;">
        <a-animation easing="linear" attribute="rotation" dur="10000" to="0 0 360" repeat="indefinite"></a-animation>
      </a-entity>


      <a-entity position="0 2 -2" rotation="0 0 0">
        <!-- Basic plane. -->
        <a-image src="#logo"  id='logos' scale="4.5 1 0" material="transparent: true">
      </a-entity>
      <a-entity position="0 1.3 -1.5" navigate-on-click="url: " geometry="primitive: plane; width: 2; height: auto" material="color: #0000FF" text="color: white; align: center; font: https://cdn.aframe.io/fonts/DejaVu-sdf.fnt;
              value: enter->">
      </a-entity>


      <a-entity
        geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
        material="src: #grid; repeat: 10000 10000; transparent: true;metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

      <a-entity light="color: #ccccff; intensity: 1; type: ambient;" visible=""></a-entity>
      <a-entity light="color: ffaaff; intensity: 1.5" position="5 5 5"></a-entity>
      <a-entity light="color: white; intensity: 0.5" position="-5 5 15"></a-entity>
      <a-entity light="color: white; type: ambient;"></a-entity>
      
      <a-sky src="#sky" rotation="0 -90 0"></a-sky>
    </a-scene>

  </body>
  
</html>