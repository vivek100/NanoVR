<!DOCTYPE html>
<!-- By Ada Rose Edwards @lady_ada_king. -->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>EV-VR</title>
    <!-- Origin Trial Token, feature = WebVR (For Chrome M62+), origin = https://aframe.io, expires = 2017-12-29 -->
    <meta name="description" content="EV-VR is India's biggest B-School fest@XLRI in Virtual Reality experience brought to you by Ensemble Valhalla Team.">
    <meta property="og:image" content="https://raw.githubusercontent.com/ngokevin/kframe/master/components/text-geometry/examples/vaporwave/preview.jpg"></meta>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v5.0.0/dist/aframe-extras.min.js"></script>
    <!-- <script src="https://unpkg.com/aframe-animation-component@^5.1.2/dist/aframe-animation-component.min.js"></script>
    -->
      <script>
        AFRAME.registerComponent('navigate-on-click', {
              schema: {
              url: {default: ''}
              },
              init: function () {
              var data = this.data;
              var el = this.el;
            
              el.addEventListener('click', function () {
                  console.log("working")
                  //document.querySelector('#logos').setAttribute("animation","property: visible; from: true; to: false; dur: 400;");
                  //document.querySelector('#logos').setAttribute('visible','false');
                  document.querySelector("#cameraWrapper").setAttribute("animation","property: position; to: 0 0 -2.1; dur: 2000; easing: linear; loop: false")
                  document.querySelector("#fancything").setAttribute("position","0 10 -17.1")
                  document.querySelector('#ui1s').setAttribute('visible','true');
                  //document.querySelector('#ui2s').setAttribute('visible','true');
                  document.querySelector('#ui3s').setAttribute('visible','true');
                  //document.querySelector('#ui4s').setAttribute('visible','true');
                  //document.querySelector('#ui5s').setAttribute('visible','true');
                  document.querySelector('#sponsors').setAttribute('visible','false');
                  document.querySelector('#back1').setAttribute('visible','false');
                  document.querySelector('#shop').setAttribute('visible','false');
                  //moveCamera(-0.1, 0.85)
                  if (data.url != "") {
                    window.location.href = data.url;  
                  }
                  
                  
              });
              }
          }); 
          
        AFRAME.registerComponent('navigate-on-spons', {
              schema: {
              url: {default: ''}
              },
              init: function () {
              var data = this.data;
              var el = this.el;
            
              el.addEventListener('click', function () {
                  console.log("working")
                  //document.querySelector('#logos').setAttribute("animation","property: visible; from: true; to: false; dur: 400;");
                  //document.querySelector('#logos').setAttribute('visible','false');
                  document.querySelector("#cameraWrapper").setAttribute("animation","property: position; to: 0 0 -4.1; dur: 2000; easing: linear; loop: false")
                  document.querySelector("#fancything").setAttribute("position","0 10 -19.1")
                  document.querySelector('#sponsors').setAttribute('visible','true');
                  document.querySelector('#back1').setAttribute('visible','true');
                  
                  //moveCamera(-0.1, 0.85)
                  if (data.url != "") {
                    window.location.href = data.url;  
                  }
                  
                  
              });
              }
          }); 
        
        
        AFRAME.registerComponent('navigate-on-shop', {
              schema: {
              url: {default: ''}
              },
              init: function () {
              var data = this.data;
              var el = this.el;
            
              el.addEventListener('click', function () {
                  console.log("working")
                  //document.querySelector('#logos').setAttribute("animation","property: visible; from: true; to: false; dur: 400;");
                  //document.querySelector('#logos').setAttribute('visible','false');
                  document.querySelector("#cameraWrapper").setAttribute("animation","property: position; to: 0 0 -4.1; dur: 2000; easing: linear; loop: false")
                  document.querySelector("#fancything").setAttribute("position","0 10 -19.1")
                  document.querySelector('#shop').setAttribute('visible','true');
                  //moveCamera(-0.1, 0.85)
                  if (data.url != "") {
                    window.location.href = data.url;  
                  }
                  
                  
              });
              }
          }); 
        
          var start, x_start, y_start, x_rotation, y_rotation;
    var duration = 1000;
    

    function moveCamera(x_destination, y_destination) {
      var camera = document.querySelector("a-camera");
        start = null;
        x_start = camera.components["look-controls"].pitchObject.rotation.x;
        x_rotation = x_destination - x_start;
        y_start = camera.components["look-controls"].yawObject.rotation.y;
        y_rotation = y_destination - y_start;
        requestAnimationFrame(step);
    }

    function step(timestamp) {
      var camera = document.querySelector("a-camera");
        if (start === null) start = timestamp;
        var progress = timestamp - start;
        camera.components["look-controls"].pitchObject.rotation.x = x_start + x_rotation * progress / duration;
        camera.components["look-controls"].yawObject.rotation.y = y_start + y_rotation * progress / duration;
        if (progress < duration) {
            requestAnimationFrame(step);
        }
    }
    </script>
  </head>
  <body>
    <a-scene>
        
      <a-assets>
        <img id="pink" src="https://img.gs/bbdkhfbzkk/stretch/http://i.imgur.com/1hyyIUi.jpg" crossorigin="anonymous" />
        <img src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" id="grid" crossorigin="anonymous">
        <img src="https://img.gs/bbdkhfbzkk/2048x1024,stretch/http://i.imgur.com/WMNH2OF.jpg" id="chrome" crossorigin="anonymous">
        <img id="sky" src="https://img.gs/bbdkhfbzkk/2048x2048,stretch/http://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />
        <img id="logo" src="nano.png" crossorigin="anonymous">
        <img id="ui1" src="2.png">
        <img id="ui2" src="2.png">
        <img id="ui3" src="3.png">
        <img id="ui4" src="5.png">
        <img id="ui5" src="4.png">
        <img id="spon" src="disease3_scan - 001 - Segments.png">
          <img id="why-male-models" src="disease3_scan - 001 - Segments.png">
          <img id="tshirt" src="normal3_scan - 001 - Segments.png">
          <img id="fall" src="fall.png">
          <img id="goggles" src="goggles.png">
          <img id="price" src="price.png">
          <img id="shoes" src="shoes.png">
          
      </a-assets>
      <a-entity id='cameraWrapper' position="0 0 0" >
        <a-camera wasd-controls-enabled="true" look-controls="reverseMouseDrag:true" cursor="rayOrigin: mouse">
            
        </a-camera>
      </a-entity>
      <a-image scale="1 1 1" src="#ui3" navigate-on-spons="url: " id="ui1s"  visible ='false' position = "-.75 2 -4" animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
      animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave" rotaion=".75 40 0"></a-image>

      <a-image scale="1 1 1" src="#ui1" navigate-on-shop="url: " id="ui3s" visible ='false' position = "1 2 -4" animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
      animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"></a-image>

      <a-image scale="5 5 5" src="#spon"  id="sponsors" visible ='false' rotation = "90 0 0" position = "0 .1 -6" ></a-image>
      <a-entity position="0 1.3 -5.5" navigate-on-click="url: " id="back1" visible ='false' geometry="primitive: plane; width: 2; height: auto" material="color: #0000FF" text="color: white; align: center; font: https://cdn.aframe.io/fonts/DejaVu-sdf.fnt;
              value: back->">
      </a-entity>

      <a-entity id='fancything' animation="property: rotation; to: 0 0 360; dur: 10000; easing: linear; loop: true" scale="2 2 2" geometry="primitive: torusKnot" position="0 10 -15" material="color: magenta; metalness:1; roughness: 0.1; sphericalEnvMap: #sky;">
        <a-animation easing="linear" attribute="rotation" dur="10000" to="0 0 360" repeat="indefinite"></a-animation>
      </a-entity>

      <!-- start Shop -->
      <a-entity id="shop" visible="false">
        <a-entity position="-1 .8 -6.7" animation="property: object3D.rotation.y; to: 360; loop: true; easing: linear; dur: 5000;loop: true">
        <a-box color="green" position="0 .1 0" scale = ".05 .4 .05"></a-box>
        <a-box color="blue" position=".2 .2 0" scale = ".05 .6 .05"></a-box>
        <a-box color="yellow" position="-.2 .06 0" scale = ".05 .3 .05"></a-box>
        <a-image  rotation="90 0 0" scale="1.4 1.41.4" src="#why-male-models"></a-image>
      </a-entity> 

      <a-entity position=".8 .8 -6.7" animation="property: object3D.rotation.y; to: 360; loop: true; easing: linear; dur: 5000;loop: true">
        <a-box color="green" position="0 .05 0" scale = ".05 .1 .05"></a-box>
        <a-box color="blue" position=".2 .01 0" scale = ".05 .02 .05"></a-box>
        <a-box color="yellow" position="-.2 .2 0" scale = ".05 .5 .05"></a-box>
        <a-image  rotation="90 0 0" scale="1.4 1.4 1.4" src="#tshirt"></a-image>
      </a-entity>

        <a-curvedimage id="stereoscopic-fall-collection-text" src="#fall" radius="5.7"
        theta-length="18" height=".6" position="-.6 1 -4.1" scale=".4 .8 .4"
        animation="property: rotation; from: 0 180 0; to: 0 210 0; delay: 750; dur: 1000"></a-curvedimage>


        <a-curvedimage id="shoes"  navigate-on-click="url: "src="#shoes" radius="5.7" theta-length="18" height=".8" position="0 1 -4.1" scale=".3 .3 .4"
                      animation="property: rotation; from: 0 180 0; to: 0 130 0; delay: 750; dur: 1000"></a-curvedimage>
 

        <a-cylinder position="0 0.5 -4.1" radius="4" height="1.6" side="back" open-ended="true" opacity=".5" color="#189e2e"></a-cylinder>
        
      </a-entity>
      <!-- End Shop -->


      <a-entity position="0 2 -2" rotation="0 0 0">
        <!-- Basic plane. -->
        <a-image src="#logo"  id='logos' scale="5.5 1 0" material="transparent: true">
      </a-entity>
      <a-entity position="0 1.3 -1.5" navigate-on-click="url: " geometry="primitive: plane; width: 2; height: auto" material="color: #0000FF" text="color: white; align: center; font: https://cdn.aframe.io/fonts/DejaVu-sdf.fnt;
              value: Click here for AR/VR visualisation">
      </a-entity>


      <a-entity
        geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
        material="src: #grid; repeat: 10000 10000; transparent: true;metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>

      <a-entity light="color: #ccccff; intensity: 1; type: ambient;" visible=""></a-entity>
      <a-entity light="color: ffaaff; intensity: 1.5" position="5 5 5"></a-entity>
      <a-entity light="color: white; intensity: 0.5" position="-5 5 15"></a-entity>
      <a-entity light="color: white; type: ambient;"></a-entity>
      
      <a-sky src="#sky" rotation="0 -90 0"></a-sky>
    </a-scene>

  </body>
  
</html>